"use client"

import { useState, useEffect, useRef, useMemo } from 'react'
import { ChevronRight, Plane, Calendar, Package, Users, Clock, FileText, Upload, ChevronDown, ClipboardPaste, Plus, Search, SlidersHorizontal, Settings2, ArrowUpDown } from 'lucide-react'
import LoadPlanDetailScreen from './load-plan-detail-screen'
import type { LoadPlanDetail } from './load-plan-types'
import { getLoadPlansFromSupabase, getLoadPlanDetailFromSupabase } from '@/lib/load-plans-supabase'
import { useLoadPlans, type LoadPlan, type ShiftType, type PeriodType, type WaveType } from '@/lib/load-plan-context'
import { Button } from '@/components/ui/button'
import { UploadModal } from './lists/upload-modal'
import { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible'
import { ClipboardPasteModal } from './clipboard-paste-modal'

// Type for bay info data from pasted CSV (Arrival)
export type BayInfo = {
  sta: string        // STA - Scheduled Time of Arrival
  flightNo: string   // FLIGHTNO - e.g., "EK 0206"
  orig: string       // ORIG - Origin
  via: string        // VIA
  eta: string        // ETA - Estimated Time of Arrival
  ata: string        // ATA - Actual Time of Arrival
  acType: string     // A/T - Aircraft Type
  regn: string       // REGN - Registration
  pos: string        // POS - Position/Bay Number
  term: string       // TERM - Terminal
  belt: string       // BELT
  remarks: string    // REMARKS
}

// Type for departure bay info data from pasted CSV
export type DepartureBayInfo = {
  std: string        // STD - Scheduled Time of Departure
  flightNo: string   // FLIGHTNO - e.g., "EK 0206"
  dest: string       // DEST - Destination
  via: string        // VIA
  etd: string        // ETD - Estimated Time of Departure
  atd: string        // ATD - Actual Time of Departure
  acType: string     // A/T - Aircraft Type
  regn: string       // REGN - Registration
  pos: string        // POS - Position/Bay Number
  term: string       // TERM - Terminal
  gate: string       // GATE
  remarks: string    // REMARKS
}

// Parse STD time (e.g., "02:50", "09:35") to hours
function parseStdToHours(std: string): number {
  const [hours, minutes] = std.split(":").map(Number)
  return hours + (minutes || 0) / 60
}

// Determine period and wave based on STD time
function determinePeriodAndWave(std: string): { period: PeriodType; wave: WaveType | null; shiftType: ShiftType } {
  const [hours, minutes] = std.split(":").map(Number)
  const timeInMinutes = hours * 60 + (minutes || 0)
  
  // Night Shift Early Morning: 00:01-05:59
  if (timeInMinutes >= 1 && timeInMinutes < 360) {
    return { period: "early-morning", wave: null, shiftType: "night" }
  }
  // Night Shift Late Morning First Wave: 06:00-09:00
  if (timeInMinutes >= 360 && timeInMinutes <= 540) {
    return { period: "late-morning", wave: "first-wave", shiftType: "night" }
  }
  // Night Shift Late Morning Second Wave: 09:01-12:59
  if (timeInMinutes > 540 && timeInMinutes < 780) {
    return { period: "late-morning", wave: "second-wave", shiftType: "night" }
  }
  // Day Shift Afternoon First Wave: 13:00-15:59
  if (timeInMinutes >= 780 && timeInMinutes < 960) {
    return { period: "afternoon", wave: "first-wave", shiftType: "day" }
  }
  // Day Shift Afternoon Second Wave: 16:00-23:59
  if (timeInMinutes >= 960 && timeInMinutes <= 1439) {
    return { period: "afternoon", wave: "second-wave", shiftType: "day" }
  }
  // Default to early morning for edge cases
  return { period: "early-morning", wave: null, shiftType: "night" }
}

// Normalize flight number for matching (remove spaces, uppercase)
function normalizeFlightNo(flightNo: string): string {
  return flightNo.replace(/\s+/g, '').toUpperCase()
}

// Parse bay data row into BayInfo object (Arrival)
function parseBayInfoRow(headers: string[], row: string[]): BayInfo {
  const getCol = (name: string) => {
    const idx = headers.findIndex(h => h.toUpperCase() === name.toUpperCase())
    return idx >= 0 ? row[idx] || '' : ''
  }
  
  return {
    sta: getCol('STA'),
    flightNo: getCol('FLIGHTNO'),
    orig: getCol('ORIG'),
    via: getCol('VIA'),
    eta: getCol('ETA'),
    ata: getCol('ATA'),
    acType: getCol('A/T'),
    regn: getCol('REGN'),
    pos: getCol('POS'),
    term: getCol('TERM'),
    belt: getCol('BELT'),
    remarks: getCol('REMARKS'),
  }
}

// Parse departure bay data row into DepartureBayInfo object
function parseDepartureBayInfoRow(headers: string[], row: string[]): DepartureBayInfo {
  const getCol = (name: string) => {
    const idx = headers.findIndex(h => h.toUpperCase() === name.toUpperCase())
    return idx >= 0 ? row[idx] || '' : ''
  }
  
  return {
    std: getCol('STD'),
    flightNo: getCol('FLIGHTNO'),
    dest: getCol('DEST'),
    via: getCol('VIA'),
    etd: getCol('ETD'),
    atd: getCol('ATD'),
    acType: getCol('A/T'),
    regn: getCol('REGN'),
    pos: getCol('POS'),
    term: getCol('TERM'),
    gate: getCol('GATE'),
    remarks: getCol('REMARKS'),
  }
}

interface QRTListScreenProps {
  onBack?: () => void
}

// Default arrival bay data (pre-populated from legacy system export)
const DEFAULT_ARRIVAL_BAY_DATA: { headers: string[]; rows: string[][] } = {
  headers: ["STA", "FLIGHTNO", "ORIG", "VIA", "ETA", "ATA", "A/T", "REGN", "POS", "TERM", "BELT", "REMARKS"],
  rows: [
    ["11/27/25 23:00", "EK 0206", "JFK/MXP", "MXP", "2:12", "", "A380", "A6EEX", "D08/A15", "T3", "", ""],
    ["11/27/25 23:59", "EK 0082", "LYS", "", "0:02", "0:04", "A350900", "A6EXA", "G04", "T1", "9", ""],
    ["11/28/25 0:05", "EK 0158", "ARN", "", "0:17", "0:17", "B7773ER", "A6ECM", "G15", "T1", "6", ""],
    ["11/28/25 0:10", "EK 0060", "HAM", "", "0:05", "0:08", "B7773ER", "A6ENL", "C39", "T1", "10", ""],
    ["11/28/25 0:15", "EK 0074", "CDG", "", "0:48", "0:50", "A380", "A6EDS", "D09/A16", "T3", "13", ""],
    ["11/28/25 0:15", "EK 0148", "AMS", "", "0:31", "0:28", "A380", "A6EOJ", "F26R/B29", "T3", "13", ""],
    ["11/28/25 0:15", "EK 0136", "VCE", "", "0:08", "0:11", "B7773ER", "A6EGO", "B03/C6", "T3", "2", ""],
    ["11/28/25 0:25", "EK 0210", "EWR/ATH", "ATH", "0:21", "0:19", "B7773ER", "A6EQD", "A04/A2", "T3", "12", ""],
    ["11/28/25 0:25", "EK 0142", "MAD", "", "0:32", "0:35", "A380", "A6EEN", "D07/A14", "T3", "4", ""],
    ["11/28/25 0:25", "EK 0184", "BRU", "", "0:34", "0:37", "B7773ER", "A6EQO", "C45", "T1", "4", ""],
    ["11/28/25 0:25", "EK 0036", "NCL", "", "0:29", "0:29", "B7773ER", "A6ENB", "G10", "T1", "2", ""],
    ["11/28/25 0:25", "EK 0018", "MAN", "", "0:38", "0:38", "A380", "A6EVQ", "D04/A11", "T3", "1", ""],
    ["11/28/25 0:30", "EK 0804", "JED", "", "0:23", "0:22", "A380", "A6EOA", "F08/C13", "T3", "7", ""],
    ["11/28/25 0:35", "EK 0256", "MEX/BCN", "BCN", "0:28", "0:27", "B7772LR", "A6EWF", "B24/B26", "T3", "9", ""],
    ["11/28/25 0:35", "EK 0248", "EZE/GIG", "GIG", "0:12", "0:15", "B7773ER", "A6ECH", "C46", "T1", "11", ""],
    ["11/28/25 0:40", "EK 0002", "LHR", "", "0:45", "0:44", "A380", "A6EUV", "A10/A20", "T3", "14", ""],
    ["11/28/25 0:40", "EK 0924", "CAI", "", "0:25", "0:24", "A380", "A6EEV", "F06/C9", "T3", "8", ""],
    ["11/28/25 0:40", "EK 0016", "LGW", "", "0:43", "0:42", "A380", "A6EES", "F09/C17", "T3", "3", ""],
    ["11/28/25 0:45", "EK 0547", "MAA", "", "0:15", "0:14", "B7773ER", "A6EGW", "F12/C21", "T3", "5", ""],
    ["11/28/25 0:45", "EK 0162", "DUB", "", "1:10", "1:10", "B7773ER", "A6ENS", "D03/A10", "T3", "11", ""],
    ["11/28/25 0:45", "EK 0040", "BHX", "", "0:57", "0:55", "A380", "A6EOP", "D01/A8", "T3", "8", ""],
    ["11/28/25 0:50", "EK 0954", "BEY", "", "0:47", "0:47", "B7773ER", "A6ENP", "D06/A13", "T3", "3", ""],
    ["11/28/25 0:50", "EK 0655", "CMB", "", "1:04", "1:04", "A350900", "A6EXB", "G12", "T1", "11", ""],
    ["11/28/25 0:55", "EK 0028", "GLA", "", "1:21", "1:21", "A380", "A6EOB", "D02/A9", "T3", "1", ""],
    ["11/28/25 0:55", "EK 0110", "MLA/LCA", "LCA", "1:02", "1:05", "B7772LR", "A6EWC", "B21L/B20", "T3", "7", ""],
    ["11/28/25 1:00", "EK 0186", "BCN", "", "0:50", "0:50", "A380", "A6EEY", "F18/B13", "T3", "6", ""],
    ["11/28/25 1:00", "EK 0355", "SIN", "", "0:58", "0:58", "A380", "A6EOI", "F13/C23", "T3", "5", ""],
    ["11/28/25 1:00", "EK 0066", "STN", "", "1:05", "1:06", "B7773ER", "A6EPH", "B15/B8", "T3", "10", ""],
    ["11/28/25 1:00", "EK 0192", "LIS", "", "1:25", "1:27", "B7773ER", "A6EPK", "F07/C11", "T3", "6", ""],
    ["11/28/25 1:00", "EK 0373", "BKK", "", "1:14", "1:13", "A380", "A6EEW", "D05/A12", "T3", "14", ""],
    ["11/28/25 1:05", "EK 0773", "CPT", "", "1:09", "1:10", "B7773ER", "A6ENZ", "C47", "T1", "3", ""],
    ["11/28/25 1:10", "EK 0338", "CEB/CRK", "CRK", "1:19", "1:23", "B7773ER", "A6ECY", "B05/C10", "T3", "9", ""],
    ["11/28/25 1:10", "EK 0369", "DPS", "", "1:12", "1:10", "A380", "A6EOX", "F20/B17", "T3", "2", ""],
    ["11/28/25 1:10", "EK 0758", "ALG", "", "1:15", "1:15", "B7773ER", "A6ECO", "B22/B22", "T3", "12", ""],
    ["11/28/25 1:20", "EK 0122", "IST", "", "1:33", "1:32", "B7773ER", "A6ECZ", "F17/B11", "T3", "13", ""],
    ["11/28/25 1:25", "EK 0834", "BAH", "", "1:26", "1:40", "B7773ER", "A6EGE", "B11/C20", "T3", "4", ""],
    ["11/28/25 1:30", "EK 0822", "DMM", "", "1:32", "1:35", "A350900", "A6EXK", "C30", "T1", "8", ""],
    ["11/28/25 1:40", "EK 0752", "CMN", "", "1:44", "1:56", "A380", "A6EEZ", "B12/C22", "T3", "5", ""],
    ["11/28/25 1:45", "EK 0860", "KWI", "", "1:35", "1:34", "B7773ER", "A6ECA", "B16/B10", "T3", "7", ""],
    ["11/28/25 2:05", "EK 0653", "CMB/MLE", "MLE", "1:59", "2:04", "B7773ER", "A6EGS", "B17/B12", "T3", "2", ""],
    ["11/28/25 2:40", "EK 0030", "LHR", "", "2:41", "2:53", "A380", "A6EDV", "D02/A9", "T3", "9", ""],
    ["11/28/25 3:25", "EK 0397", "HKT", "", "3:05", "3:11", "B7773ER", "A6ENM", "B24/B26", "T3", "11", ""],
    ["11/28/25 4:10", "EK 0784", "LOS", "", "4:03", "4:10", "B7773ER", "A6EBY", "F03/C3", "T3", "10", ""],
    ["11/28/25 4:10", "EK 0353", "SIN", "", "4:00", "4:07", "A380", "A6EOW", "F07/C11", "T3", "2", ""],
    ["11/28/25 4:20", "EK 0708", "TNR/SEZ", "SEZ", "4:14", "4:20", "B7773ER", "A6EGX", "F24/B25", "T3", "1", ""],
    ["11/28/25 4:20", "EK 0393", "SGN", "", "4:05", "4:11", "B7773ER", "A6EPQ", "B22/B22", "T3", "9", ""],
    ["11/28/25 4:25", "EK 0585", "DAC", "", "4:22", "4:27", "B7773ER", "A6EPE", "A10/A20", "T3", "12", ""],
    ["11/28/25 4:30", "EK 0417", "SYD", "", "5:20", "5:25", "A380", "A6EEF", "B21R/B20", "T3", "6", ""],
    ["11/28/25 4:40", "EK 0794", "NBJ", "", "4:37", "4:41", "B7773ER", "A6EBR", "D03/A10", "T3", "3", ""],
    ["11/28/25 4:45", "EK 0335", "MNL", "", "5:28", "5:28", "B7773ER", "A6ENA", "A05/A1", "T3", "9", ""],
    ["11/28/25 4:45", "EK 0722", "NBO", "", "4:27", "4:39", "B7773ER", "A6ECU", "B09/C16", "T3", "5", ""],
    ["11/28/25 4:45", "EK 0343", "KUL", "", "7:14", "7:38", "A380", "A6EEE", "F20/B17", "T3", "5", ""],
    ["11/28/25 4:55", "EK 0385", "HKG/BKK", "BKK", "4:45", "4:50", "A380", "A6EER", "F20/B17", "T3", "14", ""],
    ["11/28/25 4:55", "EK 0367", "TPE", "", "4:31", "4:31", "A380", "A6EED", "A04/A2", "T3", "8", ""],
    ["11/28/25 4:55", "EK 0118", "IST", "", "4:59", "5:01", "A350900", "A6EXF", "D10/A17", "T3", "8", ""],
    ["11/28/25 5:00", "EK 0363", "CAN", "", "4:54", "4:58", "B7773ER", "A6EGV", "G02", "T1", "5", ""],
    ["11/28/25 5:00", "EK 0395", "HAN", "", "4:39", "4:48", "B7773ER", "A6END", "B15/B8", "T3", "9", ""],
    ["11/28/25 5:05", "EK 0323", "ICN", "", "4:36", "4:37", "A380", "A6EOL", "F08/C13", "T3", "11", ""],
    ["11/28/25 5:05", "EK 0764", "JNB", "", "5:22", "5:25", "A380", "A6EDU", "D01/A8", "T3", "2", ""],
    ["11/28/25 5:05", "EK 0704", "MRU", "", "5:00", "5:06", "A380", "A6EUY", "F19/B15", "T3", "2", ""],
    ["11/28/25 5:15", "EK 0413", "CHC/SYD", "SYD", "5:40", "5:47", "A380", "A6EVN", "B11/C20", "T3", "11", ""],
    ["11/28/25 5:15", "EK 0449", "AKL", "", "5:18", "5:22", "A380", "A6EVS", "F10/C19", "T3", "7", ""],
    ["11/28/25 5:20", "EK 0441", "ADL", "", "5:35", "5:34", "B7772LR", "A6EWE", "A08/A22", "T3", "1", ""],
    ["11/28/25 5:25", "EK 0776", "DUR", "", "5:14", "5:16", "B7773ER", "A6EGC", "F27/B30", "T3", "4", ""],
    ["11/28/25 5:25", "EK 0317", "KIX", "", "5:11", "5:16", "A380", "A6EVP", "F22/B21", "T3", "1", ""],
    ["11/28/25 5:25", "EK 0421", "PER", "", "5:25", "5:28", "A380", "A6EOG", "B27/B31", "T3", "12", ""],
    ["11/28/25 5:25", "EK 0619", "SKT", "", "5:43", "5:45", "B7773ER", "A6EGY", "F05/C7", "T3", "14", ""],
    ["11/28/25 5:30", "EK 0359", "CGK", "", "6:07", "6:11", "B7773ER", "A6EGM", "B01/C2", "T3", "5", ""],
    ["11/28/25 5:30", "EK 0319", "NRT", "", "5:17", "5:16", "A380", "A6EVI", "A09/A21", "T3", "3", ""],
    ["11/28/25 5:30", "EK 0307", "PEK", "", "5:05", "5:09", "B7773ER", "A6EGR", "B16/B10", "T3", "11", ""],
    ["11/28/25 5:30", "EK 0435", "BNE", "", "5:33", "5:33", "A380", "A6EOF", "A07/A23", "T3", "13", ""],
    ["11/28/25 5:30", "EK 0096", "FCO", "", "5:12", "5:15", "B7773ER", "A6EGL", "G13", "T1", "5", ""],
    ["11/28/25 5:35", "EK 0329", "SZX", "", "5:14", "5:32", "B7773ER", "A6ENT", "F23/B23", "T3", "10", ""],
    ["11/28/25 5:40", "EK 0381", "HKG", "", "5:09", "5:10", "A380", "A6EUU", "A03/A3", "T3", "9", ""],
    ["11/28/25 5:40", "EK 0407", "MEL", "", "5:57", "6:01", "A380", "A6EVL", "F21/B19", "T3", "1", ""],
    ["11/28/25 5:45", "EK 0649", "CMB", "", "6:24", "6:25", "B7773ER", "A6EGP", "C28", "T1", "5", ""],
    ["11/28/25 5:45", "EK 0399", "DPS", "", "5:26", "5:27", "B7773ER", "A6ENY", "G03", "T1", "8", ""],
    ["11/28/25 5:50", "EK 0032", "LHR", "", "5:50", "5:51", "A380", "A6EEH", "D08/A15", "T3", "3", ""],
    ["11/28/25 5:55", "EK 0771", "CPT", "", "6:00", "6:06", "B7773ER", "A6EPJ", "C41", "T1", "4", ""],
    ["11/28/25 5:55", "EK 0623", "LHE", "", "5:59", "6:02", "B7773ER", "A6ENJ", "F18/B13", "T3", "6", ""],
    ["11/28/25 5:55", "EK 0377", "BKK", "", "6:12", "6:13", "A380", "A6EOY", "A10/A20", "T3", "14", ""],
    ["11/28/25 5:55", "EK 0188", "BCN", "", "5:45", "5:46", "B7773ER", "A6EGG", "G15", "T1", "14", ""],
    ["11/28/25 6:00", "EK 0349", "KTI/SIN", "SIN", "6:04", "6:05", "B7773ER", "A6ECT", "G09", "T1", "9", ""],
    ["11/28/25 6:00", "EK 0182", "BRU", "", "5:51", "5:56", "B7773ER", "A6EQI", "B14/B6", "T3", "12", ""],
    ["11/28/25 6:05", "EK 0084", "GVA", "", "6:14", "6:18", "B7773ER", "A6EPY", "B20/B18", "T3", "5", ""],
    ["11/28/25 6:05", "EK 0501", "BOM", "", "6:11", "6:12", "A380", "A6EVE", "D06/A13", "T3", "8", ""],
    ["11/28/25 6:05", "EK 0836", "BAH", "", "6:06", "6:08", "A350900", "A6EXI", "C39", "T1", "1", ""],
    ["11/28/25 6:10", "EK 0926", "CAI", "", "6:28", "6:28", "A380", "A6EEC", "D03/A10", "T3", "11", ""],
    ["11/28/25 6:10", "EK 0311", "HGH", "", "5:31", "5:33", "A350900", "A6EXG", "D05/A12", "T3", "7", ""],
    ["11/28/25 6:15", "EK 0132", "DME", "", "5:41", "5:49", "A380", "A6EDM", "B10/C18", "T3", "4", ""],
    ["11/28/25 6:15", "EK 0387", "TPE", "", "5:36", "5:44", "B7772LR", "A6EWA", "C33", "T1", "1", ""],
    ["11/28/25 6:15", "EK 0539", "AMD", "", "5:55", "5:55", "A350900", "A6EXL", "G10", "T1", "2", ""],
    ["11/28/25 6:15", "EK 0867", "MCT", "", "6:23", "6:25", "A350900", "A6EXB", "G16", "T1", "5", ""],
    ["11/28/25 6:20", "EK 0058", "DUS", "", "6:09", "6:11", "A380", "A6EUN", "D04/A11", "T3", "7", ""],
    ["11/28/25 6:20", "EK 0906", "AMM", "", "6:20", "6:25", "A350900", "A6EXM", "C42", "T1", "12", ""],
    ["11/28/25 6:25", "EK 0714", "HRE/LUN", "LUN", "6:16", "6:19", "B7773ER", "A6EGT", "B02/C4", "T3", "13", ""],
    ["11/28/25 6:25", "EK 0854", "KWI", "", "6:31", "6:33", "A350900", "A6EXC", "G18", "T1", "1", ""],
    ["11/28/25 6:25", "EK 0126", "VIE", "", "6:29", "6:30", "B7773ER", "A6EPN", "F25/B27", "T3", "4", ""],
    ["11/28/25 6:25", "EK 0176", "LED", "", "6:21", "6:21", "B7773ER", "A6ECG", "G08", "T1", "10", ""],
    ["11/28/25 6:30", "EK 0092", "MXP", "", "6:34", "6:37", "A380", "A6EVH", "F06/C9", "T3", "2", ""],
    ["11/28/25 6:30", "EK 0062", "HAM", "", "6:26", "6:26", "B7773ER", "A6ECF", "G22", "T1", "1", ""],
    ["11/28/25 6:35", "EK 0513", "DEL", "", "6:32", "6:37", "B7773ER", "A6ENN", "B23/B24", "T3", "12", ""],
    ["11/28/25 6:35", "EK 0543", "MAA", "", "6:51", "6:53", "B7773ER", "A6ENF", "A01/A5", "T3", "13", ""],
    ["11/28/25 6:35", "EK 0052", "MUC", "", "6:49", "6:54", "A380", "A6EOO", "B18R/B14", "T3", "7", ""],
    ["11/28/25 6:40", "EK 0048", "FRA", "", "6:42", "6:44", "A380", "A6EDZ", "A05/A1", "T3", "6", ""],
    ["11/28/25 6:40", "EK 0525", "HYD", "", "6:36", "6:40", "B7773ER", "A6ENO", "B17/B12", "T3", "3", ""],
    ["11/28/25 6:45", "EK 0824", "DMM", "", "6:40", "6:48", "B7773ER", "A6EQP", "C31", "T1", "5", ""],
    ["11/28/25 6:45", "EK 0371", "SAI/BKK", "BKK", "6:47", "6:47", "B7773ER", "A6ENI", "G07", "T1", "14", ""],
    ["11/28/25 6:50", "EK 0788", "ABJ/ACC", "ACC", "6:50", "6:52", "B7773ER", "A6EPO", "F02/C1", "T3", "8", ""],
    ["11/28/25 6:50", "EK 0816", "RUH", "", "6:53", "6:56", "B7773ER", "A6EQE", "G12", "T1", "9", ""],
    ["11/28/25 6:55", "EK 0313", "HND", "", "6:57", "7:01", "B7773ER", "A6EQJ", "B06/C12", "T3", "2", ""],
    ["11/28/25 7:00", "EK 0405", "MEL", "", "8:10", "8:21", "B7773ER", "A6EQH", "B22/B22", "T3", "1", ""],
    ["11/28/25 7:05", "EK 0086", "ZRH", "", "6:56", "6:56", "B7773ER", "A6EQA", "G11", "T1", "1", ""],
    ["11/28/25 7:05", "EK 0533", "COK", "", "7:04", "7:04", "B7772LR", "A6EWH", "F12/C21", "T3", "4", ""],
    ["11/28/25 7:10", "EK 0569", "BLR", "", "7:11", "7:15", "A380", "A6EVR", "F19/B15", "T3", "11", ""],
    ["11/28/25 7:10", "EK 0978", "IKA", "", "7:10", "7:17", "B7773ER", "A6EGB", "F04/C5", "T3", "2", ""],
    ["11/28/25 7:10", "EK 0068", "STN", "", "6:59", "7:03", "B7773ER", "A6EPU", "B03/C6", "T3", "10", ""],
    ["11/28/25 7:15", "EK 0523", "TRV", "", "7:25", "7:28", "B7773ER", "A6ENK", "B04/C8", "T3", "6", ""],
    ["11/28/25 7:20", "EK 0010", "LGW", "", "7:10", "7:09", "A380", "A6EUX", "A08/A22", "T3", "3", ""],
    ["11/28/25 7:20", "EK 0004", "LHR", "", "7:31", "7:36", "A380", "A6EON", "B26R/B32", "T3", "9", ""],
    ["11/28/25 7:20", "EK 0076", "CDG", "", "7:22", "7:29", "A380", "A6EEB", "B11/C20", "T3", "7", ""],
    ["11/28/25 7:40", "EK 0144", "MAD", "", "7:27", "7:28", "B7773ER", "A6EPL", "G17", "T1", "4", ""],
    ["11/28/25 7:45", "EK 0150", "AMS", "", "7:37", "7:49", "A380", "A6EEP", "D09/A16", "T3", "14", ""],
    ["11/28/25 7:50", "EK 0038", "BHX", "", "7:43", "7:52", "B7773ER", "A6ENH", "D01/A8", "T3", "10", ""],
    ["11/28/25 7:50", "EK 0797", "CKY/DSS", "DSS", "7:39", "7:41", "B7773ER", "A6EGA", "D10/A17", "T3", "13", ""],
    ["11/28/25 7:55", "EK 0020", "MAN", "", "8:33", "8:42", "A380", "A6EUP", "D05/A12", "T3", "1", ""],
    ["11/28/25 8:00", "EK 0244", "YUL", "", "8:12", "8:18", "B7772LR", "A6EWJ", "F26L/B29", "T3", "6", ""],
    ["11/28/25 8:05", "EK 0024", "EDI", "", "7:50", "8:13", "A350900", "A6EXH", "B01/C2", "T3", "11", ""],
    ["11/28/25 8:10", "EK 0164", "DUB", "", "8:08", "8:11", "B7773ER", "A6EPA", "F17/B11", "T3", "7", ""],
    ["11/28/25 8:10", "EK 0204", "JFK", "", "8:05", "8:24", "A380", "A6EUH", "F21/B19", "T3", "5", ""],
    ["11/28/25 8:10", "EK 0802", "JED", "", "8:19", "8:27", "A380", "A6EUC", "A02/A4", "T3", "14", ""],
    ["11/28/25 8:15", "EK 0194", "LIS", "", "8:06", "8:10", "B7773ER", "A6EPM", "G21", "T1", "2", ""],
    ["11/28/25 8:15", "EK 0232", "IAD", "", "8:20", "8:35", "A380", "A6EET", "F18/B13", "T3", "10", ""],
    ["11/28/25 8:15", "EK 0766", "JNB", "", "8:10", "8:19", "B7773ER", "A6ENX", "B12/C22", "T3", "4", ""],
    ["11/28/25 8:20", "EK 0808", "MED", "", "8:24", "8:31", "B7773ER", "A6ENE", "F27/B30", "T3", "8", ""],
    ["11/28/25 8:20", "EK 0042", "LHR", "", "8:14", "8:16", "B7773ER", "A6ENG", "D02/A9", "T3", "12", ""],
    ["11/28/25 8:45", "EK 0006", "LHR", "", "8:46", "8:57", "A380", "A6EOE", "B18R/B14", "T3", "11", ""],
    ["11/28/25 10:30", "EK 0431", "BNE", "", "10:25", "10:31", "B7773ER", "A6ECE", "A01/A5", "T3", "7", ""],
    ["11/28/25 11:35", "EK 0637", "PEW", "", "11:12", "11:19", "B7773ER", "A6ENR", "D01/A8", "T3", "4", ""],
    ["11/28/25 11:35", "EK 0613", "ISB", "", "11:26", "11:29", "B7773ER", "A6ENW", "A06/A24", "T3", "12", ""],
    ["11/28/25 11:40", "EK 0242", "YYZ", "", "12:25", "", "A380", "A6EEO", "B18R/B14", "T3", "13", ""],
    ["11/28/25 11:40", "EK 0309", "PEK", "", "11:43", "11:46", "B7773ER", "A6ECV", "D06/A13", "T3", "7", ""],
    ["11/28/25 12:00", "EK 0222", "DFW", "", "12:02", "12:05", "B7773ER", "A6EQF", "F17/B11", "T3", "2", ""],
    ["11/28/25 12:05", "EK 0305", "PVG", "", "12:14", "", "B7773ER", "A6ENV", "F27/B30", "T3", "10", ""],
    ["11/28/25 12:05", "EK 0828", "DMM", "", "12:13", "12:20", "A350900", "A6EXI", "B17/B12", "T3", "3", ""],
    ["11/28/25 12:10", "EK 0531", "COK", "", "12:38", "", "B7773ER", "A6EBM", "D07/A14", "T3", "6", ""],
    ["11/28/25 12:10", "EK 0625", "LHE", "", "12:03", "12:08", "B7773ER", "A6ECZ", "B20/B18", "T3", "5", ""],
    ["11/28/25 12:10", "EK 0505", "BOM", "", "11:55", "12:14", "B7773ER", "A6ENU", "B26L/B32", "T3", "9", ""],
    ["11/28/25 12:15", "EK 0838", "BAH", "", "12:04", "", "A350900", "A6EXG", "B11/C20", "T3", "14", ""],
    ["11/28/25 12:20", "EK 0657", "MLE", "", "12:17", "", "B7773ER", "A6EGU", "A03/A3", "T3", "4", ""],
    ["11/28/25 12:25", "EK 0527", "HYD", "", "12:39", "", "B7773ER", "A6EGN", "D10/A17", "T3", "11", ""],
    ["11/28/25 12:35", "EK 0820", "RUH", "", "12:24", "", "B7773ER", "A6EQK", "B27/B31", "T3", "12", ""],
    ["11/28/25 12:40", "EK 0545", "MAA", "", "12:21", "12:22", "B7773ER", "A6ENQ", "D02/A9", "T3", "1", ""],
    ["11/28/25 12:45", "EK 0856", "KWI", "", "13:25", "", "B7773ER", "A6EQM", "A09/A21", "T3", "6", ""],
    ["11/28/25 12:55", "EK 0651", "CMB", "", "14:42", "", "B7773ER", "A6EPD", "D07/A14", "T3", "6", ""],
    ["11/28/25 13:00", "EK 0511", "DEL", "", "12:42", "", "B7773ER", "A6EGS", "D03/A10", "T3", "7", ""],
    ["11/28/25 13:00", "EK 0565", "BLR", "", "12:46", "", "B7773ER", "A6EGQ", "A04/A2", "T3", "5", ""],
    ["11/28/25 13:05", "EK 0571", "CCU", "", "12:26", "", "B7773ER", "A6EGZ", "D08/A15", "T3", "8", ""],
    ["11/28/25 13:10", "EK 0706", "SEZ", "", "13:11", "", "B7773ER", "A6ECX", "D04/A11", "T3", "1", ""],
    ["11/28/25 13:10", "EK 0409", "MEL", "", "14:25", "", "A380", "A6EUE", "F21/B19", "T3", "5", ""],
    ["11/28/25 13:15", "EK 0375", "BKK", "", "12:45", "", "A380", "A6EOQ", "A10/A20", "T3", "14", ""],
    ["11/28/25 13:15", "EK 0946", "BSR", "", "13:00", "", "B7773ER", "A6EPE", "A02/A4", "T3", "2", ""],
    ["11/28/25 13:20", "EK 0415", "SYD", "", "13:49", "", "A380", "A6EUL", "F18/B13", "T3", "10", ""],
    ["11/28/25 13:20", "EK 0345", "KUL", "", "13:52", "", "B7773ER", "A6EGK", "B23/B24", "T3", "8", ""],
    ["11/28/25 13:20", "EK 0583", "DAC", "", "13:59", "", "B7773ER", "A6EPR", "B15/B8", "T3", "2", ""],
    ["11/28/25 13:20", "EK 0601", "KHI", "", "13:11", "", "B7773ER", "A6END", "B24/B26", "T3", "9", ""],
    ["11/28/25 13:20", "EK 0337", "MNL", "", "13:47", "", "B7773ER", "A6ENC", "B14/B6", "T3", "11", ""],
    ["11/28/25 14:00", "EK 0315", "SIN", "", "13:44", "", "A380", "A6EEG", "A06/A24", "T3", "12", ""],
    ["11/28/25 14:05", "EK 0659", "MLE", "", "14:02", "", "B7773ER", "A6EPC", "A05/A1", "T3", "7", ""],
    ["11/28/25 15:00", "EK 0806", "JED", "", "14:54", "", "A380", "A6EER", "A08/A22", "T3", "14", ""],
    ["11/28/25 16:20", "EK 0130", "DME", "", "16:10", "", "B7773ER", "A6ECK", "F23/B23", "T3", "2", ""],
    ["11/28/25 17:00", "EK 0958", "BEY", "", "17:00", "", "B7773ER", "A6ENL", "B21L/B20", "T3", "8", ""],
    ["11/28/25 17:30", "EK 0814", "RUH", "", "17:29", "", "B7773ER", "A6ECF", "B18L/B14", "T3", "3", ""],
    ["11/28/25 17:30", "EK 0507", "BOM", "", "17:18", "", "B7773ER", "A6EGX", "B26L/B32", "T3", "11", ""],
    ["11/28/25 17:45", "EK 0928", "CAI", "", "17:48", "", "A380", "A6EED", "F22/B21", "T3", "10", ""],
    ["11/28/25 18:35", "EK 0517", "DEL", "", "18:29", "", "B7773ER", "A6EGV", "F17/B11", "T3", "6", ""],
    ["11/28/25 18:40", "EK 0230", "SEA", "", "18:19", "", "B7773ER", "A6EPX", "B23/B24", "T3", "2", ""],
    ["11/28/25 19:00", "EK 0044", "FRA", "", "18:55", "", "B7773ER", "A6EGO", "B22/B22", "T3", "4", ""],
    ["11/28/25 19:10", "EK 0236", "ORD", "", "18:45", "", "B7773ER", "A6EQL", "F16/B9", "T3", "7", ""],
    ["11/28/25 19:15", "EK 0944", "BGW", "", "19:17", "", "B7773ER", "A6ENW", "B24/B26", "T3", "12", ""],
    ["11/28/25 19:20", "EK 0102", "MXP", "", "19:22", "", "B7773ER", "A6ECA", "F27/B30", "T3", "1", ""],
    ["11/28/25 19:20", "EK 0238", "BOS", "", "18:41", "", "B7773ER", "A6EPV", "B17/B12", "T3", "14", ""],
    ["11/28/25 19:25", "EK 0226", "SFO", "", "19:07", "", "A380", "A6EVO", "D09/A16", "T3", "8", ""],
    ["11/28/25 19:30", "EK 0216", "LAX", "", "19:44", "", "A380", "A6EUJ", "D06/A13", "T3", "6", ""],
    ["11/28/25 19:40", "EK 0072", "CDG", "", "19:24", "", "A380", "A6EES", "D05/A12", "T3", "11", ""],
    ["11/28/25 19:45", "EK 0212", "IAH", "", "19:50", "", "A380", "A6EUF", "F21/B19", "T3", "5", ""],
    ["11/28/25 19:55", "EK 0914", "DAM", "", "", "", "B777300", "", "", "T3", "", "Cancelled"],
    ["11/28/25 19:55", "EK 0022", "MAN", "", "19:55", "", "A380", "A6EOS", "A05/A1", "T3", "7", ""],
    ["11/28/25 20:00", "EK 0840", "BAH", "", "20:02", "", "B7773ER", "A6EGZ", "B20/B18", "T3", "4", ""],
    ["11/28/25 20:00", "EK 0724", "ADD", "", "19:54", "", "B7772LR", "A6EWH", "D07/A14", "T3", "9", ""],
    ["11/28/25 20:00", "EK 0008", "LHR", "", "20:03", "", "A380", "A6EUV", "F20/B17", "T3", "1", ""],
    ["11/28/25 20:00", "EK 0166", "DUB", "", "19:43", "", "B7773ER", "A6ECQ", "F25/B27", "T3", "10", ""],
    ["11/28/25 20:20", "EK 0146", "AMS", "", "20:12", "", "B7773ER", "A6EGD", "B21L/B20", "T3", "8", ""],
    ["11/28/25 20:25", "EK 0768", "JNB", "", "20:20", "", "B7773ER", "A6EGF", "D10/A17", "T3", "2", ""],
    ["11/28/25 20:25", "EK 0202", "JFK", "", "20:21", "", "A380", "A6EEQ", "F18/B13", "T3", "12", ""],
    ["11/28/25 20:30", "EK 0012", "LGW", "", "20:33", "", "A380", "A6EUZ", "F22/B21", "T3", "11", ""],
    ["11/28/25 20:30", "EK 0858", "KWI", "", "20:37", "", "B7773ER", "A6EQA", "F26L/B29", "T3", "6", ""],
    ["11/28/25 21:05", "EK 0503", "BOM", "", "20:55", "", "A350900", "A6EXH", "D04/A11", "T3", "9", ""],
    ["11/28/25 21:20", "EK 0980", "IKA", "", "21:17", "", "B7773ER", "A6ENR", "F24/B25", "T3", "7", ""],
    ["11/28/25 21:30", "EK 0661", "MLE", "", "21:25", "", "B7773ER", "A6EPA", "B03/C6", "T3", "2", ""],
    ["11/28/25 21:45", "EK 0726", "DAR", "", "21:40", "", "B7773ER", "A6ECH", "D07/A14", "T3", "13", ""],
    ["11/28/25 21:45", "EK 0922", "CAI", "", "21:48", "", "B7772LR", "A6EWJ", "B27/B31", "T3", "10", ""],
    ["11/28/25 21:45", "EK 0347", "KUL", "", "21:25", "", "B7773ER", "A6EPH", "A07/A23", "T3", "4", ""],
    ["11/28/25 21:50", "EK 0124", "IST", "", "21:38", "", "A380", "A6EET", "A02/A4", "T3", "5", ""],
    ["11/28/25 22:15", "EK 0587", "DAC", "", "22:01", "", "B7773ER", "A6ENO", "B16/B10", "T3", "2", ""],
    ["11/28/25 22:20", "EK 0180", "WAW", "", "22:23", "", "B7773ER", "A6ENJ", "C46", "T1", "4", ""],
    ["11/28/25 22:25", "EK 0365", "SGN", "", "22:10", "", "A350900", "A6EXD", "B08/C14", "T3", "9", ""],
    ["11/28/25 22:25", "EK 0730", "EBB", "", "22:16", "", "B7773ER", "A6EGB", "B23/B24", "T3", "14", ""],
    ["11/28/25 22:35", "EK 0262", "GRU", "", "22:25", "", "A380", "A6EVM", "D06/A13", "T3", "1", ""],
    ["11/28/25 22:40", "EK 0379", "HKT", "", "22:28", "", "B7773ER", "A6ENP", "G01", "T1", "11", ""],
    ["11/28/25 22:40", "EK 0904", "AMM", "", "22:39", "", "A380", "A6EOC", "A03/A3", "T3", "9", ""],
    ["11/28/25 22:45", "EK 0720", "NBO", "", "22:33", "", "B7773ER", "A6ENG", "B01/C2", "T3", "12", ""],
    ["11/28/25 23:00", "EK 0567", "BLR", "", "22:40", "", "B7773ER", "A6EGL", "B15/B8", "T3", "10", ""],
    ["11/28/25 23:00", "EK 0214", "BOG/MIA", "MIA", "22:24", "", "B7773ER", "A6EQB", "A10/A20", "T3", "8", ""],
    ["11/28/25 23:00", "EK 0357", "CGK", "", "22:44", "", "B7773ER", "A6EPG", "A06/A24", "T3", "6", ""],
    ["11/28/25 23:00", "EK 0383", "HKG", "", "22:43", "", "B7773ER", "A6EPK", "D02/A9", "T3", "2", ""],
    ["11/28/25 23:00", "EK 0702", "MRU", "", "22:56", "", "A380", "A6EOZ", "D01/A8", "T3", "13", ""],
    ["11/28/25 23:00", "EK 0206", "JFK/MXP", "MXP", "23:00", "", "A380", "A6EUB", "A08/A22", "T3", "14", ""],
    ["11/28/25 23:10", "EK 0333", "MNL", "", "23:13", "", "B7773ER", "A6EGE", "B05/C10", "T3", "5", ""],
    ["11/28/25 23:15", "EK 0134", "DME", "", "23:02", "", "A380", "A6EDM", "D08/A15", "T3", "7", ""],
    ["11/28/25 23:20", "EK 0094", "BLQ", "", "23:20", "", "A350900", "A6EXE", "G03", "T1", "11", ""],
    ["11/28/25 23:25", "EK 0050", "MUC", "", "23:25", "", "A380", "A6EOO", "F20/B17", "T3", "8", ""],
    ["11/28/25 23:25", "EK 0128", "VIE", "", "23:25", "", "A380", "A6EDZ", "B10/C18", "T3", "4", ""],
    ["11/28/25 23:25", "EK 0112", "BUD", "", "23:25", "", "B7773ER", "A6ECG", "G08", "T1", "14", ""],
    ["11/28/25 23:30", "EK 0098", "FCO", "", "23:30", "", "A380", "A6EEP", "D09/A16", "T3", "2", ""],
    ["11/28/25 23:30", "EK 0818", "RUH", "", "23:19", "", "B7773ER", "A6EPD", "F27/B30", "T3", "9", ""],
    ["11/28/25 23:30", "EK 0748", "TUN", "", "23:16", "", "A350900", "A6EXA", "F07/C11", "T3", "1", ""],
    ["11/28/25 23:35", "EK 0078", "NCE", "", "23:21", "", "A380", "A6EOD", "F18/B13", "T3", "6", ""],
  ],
}

// Default departure bay data (pre-populated from legacy system export)
const DEFAULT_DEPARTURE_BAY_DATA: { headers: string[]; rows: string[][] } = {
  headers: ["STD", "FLIGHTNO", "DEST", "VIA", "ETD", "ATD", "A/T", "REGN", "POS", "TERM", "GATE", "REMARKS"],
  rows: [
    ["12/3/25 0:15", "EK 0801", "JED", "", "0:15", "0:17", "A380", "A6EOH", "D06", "T3", "A13", ""],
    ["12/3/25 1:15", "EK 0977", "IKA", "", "1:15", "1:17", "B7773ER", "A6EGJ", "B01", "T3", "C2", ""],
    ["12/3/25 1:25", "EK 0853", "KWI", "", "1:25", "1:24", "A350900", "A6EXA", "G08", "T1", "A7", ""],
    ["12/3/25 1:25", "EK 0815", "RUH", "", "1:25", "1:25", "B7773ER", "A6EQK", "A06", "T3", "A24", ""],
    ["12/3/25 1:55", "EK 0582", "DAC", "", "2:30", "2:25", "B7773ER", "A6ENI", "A07", "T3", "A23", ""],
    ["12/3/25 2:00", "EK 0570", "CCU", "", "2:00", "2:00", "B7773ER", "A6ENR", "B18L", "T3", "B14", ""],
    ["12/3/25 2:00", "EK 0414", "SYD", "", "2:05", "2:04", "A380", "A6EUW", "D01", "T3", "A8", ""],
    ["12/3/25 2:00", "EK 0440", "ADL", "", "2:00", "2:10", "A350900", "A6EXM", "A10", "T3", "A20", ""],
    ["12/3/25 2:10", "EK 0835", "BAH", "", "2:10", "2:11", "A350900", "A6EXJ", "B15", "T3", "B8", ""],
    ["12/3/25 2:10", "EK 0165", "DUB", "", "2:20", "2:19", "B7773ER", "A6ECU", "G12", "T1", "A19", ""],
    ["12/3/25 2:15", "EK 0866", "MCT", "", "2:15", "2:08", "A350900", "A6EXE", "G07", "T1", "A19a", ""],
    ["12/3/25 2:15", "EK 0213", "MIA/BOG", "BOG", "2:35", "2:34", "B7773ER", "A6EPW", "B21L", "T3", "B20", ""],
    ["12/3/25 2:20", "EK 0823", "DMM", "", "2:30", "2:25", "B7773ER", "A6EQJ", "F02", "T3", "C1", ""],
    ["12/3/25 2:25", "EK 0231", "IAD", "", "2:25", "2:32", "A380", "A6EEO", "F22", "T3", "B21", ""],
    ["12/3/25 2:25", "EK 0701", "MRU", "", "2:35", "2:32", "A380", "A6EEC", "F19", "T3", "B15", ""],
    ["12/3/25 2:30", "EK 0348", "SIN/KTI", "KTI", "2:35", "2:34", "B7773ER", "A6ECG", "B12", "T3", "C22", ""],
    ["12/3/25 2:30", "EK 0656", "MLE", "", "2:30", "2:26", "B7773ER", "A6EPK", "F16", "T3", "B9", ""],
    ["12/3/25 2:35", "EK 0203", "JFK", "", "2:45", "2:38", "A380", "A6EOG", "A03", "T3", "A3", ""],
    ["12/3/25 2:35", "EK 0650", "CMB", "", "2:45", "2:50", "B7773ER", "A6EPH", "B05", "T3", "C10", ""],
    ["12/3/25 2:40", "EK 0705", "SEZ", "", "2:40", "2:40", "B7773ER", "A6ECJ", "A09", "T3", "A21", ""],
    ["12/3/25 2:40", "EK 0021", "MAN", "", "3:10", "3:02", "A380", "A6EET", "D03", "T3", "A10", ""],
    ["12/3/25 2:40", "EK 0221", "DFW", "", "2:45", "2:40", "B7773ER", "A6EQG", "F17", "T3", "B11", ""],
    ["12/3/25 2:45", "EK 0420", "PER", "", "3:10", "3:09", "A380", "A6EOF", "F18", "T3", "B13", ""],
    ["12/3/25 2:45", "EK 0243", "YUL", "", "2:50", "2:45", "B7772LR", "A6EWF", "B20", "T3", "B18", ""],
    ["12/3/25 2:45", "EK 0530", "COK", "", "2:45", "2:51", "B7773ER", "A6EGQ", "F24", "T3", "B25", ""],
    ["12/3/25 2:50", "EK 0338", "CEB/CRK", "CRK", "2:55", "2:55", "B7773ER", "A6ENW", "B22", "T3", "B22", ""],
    ["12/3/25 2:50", "EK 0011", "LGW", "", "2:50", "2:51", "A380", "A6EOP", "D04", "T3", "A11", ""],
    ["12/3/25 2:50", "EK 0430", "BNE", "", "2:55", "2:55", "B7773ER", "A6EGC", "B14", "T3", "B6", ""],
    ["12/3/25 2:50", "EK 0544", "MAA", "", "3:00", "2:57", "B7773ER", "A6ENQ", "A01", "T3", "A5", ""],
    ["12/3/25 2:55", "EK 0408", "MEL", "", "3:25", "3:25", "A380", "A6EUL", "B26R", "T3", "B32", ""],
    ["12/3/25 2:55", "EK 0318", "NRT", "", "2:55", "2:56", "A380", "A6EUS", "F10", "T3", "C19", ""],
    ["12/3/25 3:00", "EK 0378", "HKT", "", "3:00", "3:02", "B7773ER", "A6EGG", "F26L", "T3", "B29", ""],
    ["12/3/25 3:05", "EK 0316", "KIX", "", "3:15", "3:13", "A380", "A6EEW", "F07", "T3", "C11", ""],
    ["12/3/25 3:05", "EK 0219", "MCO", "", "3:15", "3:10", "B7773ER", "A6ECH", "B24", "T3", "B26", ""],
    ["12/3/25 3:05", "EK 0384", "BKK/HKG", "HKG", "3:30", "3:34", "A380", "A6EDF", "F13", "T3", "C23", ""],
    ["12/3/25 3:10", "EK 0007", "LHR", "", "3:15", "3:14", "A380", "A6EEE", "A08", "T3", "A22", ""],
    ["12/3/25 3:10", "EK 0302", "PVG", "", "3:15", "3:14", "A380", "A6EEY", "F09", "T3", "C17", ""],
    ["12/3/25 3:10", "EK 0612", "ISB", "", "3:25", "3:18", "B7773ER", "A6ENH", "B10", "T3", "C18", ""],
    ["12/3/25 3:15", "EK 0145", "AMS", "", "3:15", "3:14", "B7773ER", "A6ENG", "B03", "T3", "C6", ""],
    ["12/3/25 3:15", "EK 0354", "SIN", "", "3:30", "3:24", "A380", "A6EOI", "F12", "T3", "C21", ""],
    ["12/3/25 3:20", "EK 0636", "PEW", "", "3:45", "3:46", "B7773ER", "A6EGN", "F05", "T3", "C7", ""],
    ["12/3/25 3:20", "EK 0043", "FRA", "", "3:20", "3:20", "B7773ER", "A6ENN", "B01", "T3", "C2", ""],
    ["12/3/25 3:20", "EK 0071", "CDG", "", "3:20", "3:19", "A380", "A6EEA", "D08", "T3", "A15", ""],
    ["12/3/25 3:20", "EK 0306", "PEK", "", "3:30", "3:24", "B7773ER", "A6EGR", "G09", "T1", "A7", ""],
    ["12/3/25 3:25", "EK 0368", "DPS", "", "3:25", "3:34", "A380", "A6EOY", "F06", "T3", "C9", ""],
    ["12/3/25 3:30", "EK 0322", "ICN", "", "3:30", "3:31", "A380", "A6EES", "D06", "T3", "A13", ""],
    ["12/3/25 3:30", "EK 0526", "HYD", "", "3:30", "3:36", "B7773ER", "A6EGK", "B23", "T3", "B24", ""],
    ["12/3/25 3:30", "EK 0241", "YYZ", "", "3:45", "3:41", "A380", "A6EEQ", "A05", "T3", "A1", ""],
    ["12/3/25 3:30", "EK 0382", "HKG", "", "3:30", "3:27", "B7773ER", "A6EPS", "A02", "T3", "A4", ""],
    ["12/3/25 3:30", "EK 0129", "DME", "", "3:30", "3:30", "B7773ER", "A6ECV", "F03", "T3", "C3", ""],
    ["12/3/25 3:40", "EK 0332", "MNL", "", "3:40", "3:37", "B7773ER", "A6EGH", "B17", "T3", "B12", ""],
    ["12/3/25 3:40", "EK 0346", "KUL", "", "3:45", "3:46", "B7773ER", "A6EPF", "F27", "T3", "B30", ""],
    ["12/3/25 3:40", "EK 0366", "TPE", "", "4:25", "4:23", "A380", "A6EUY", "B11", "T3", "C20", ""],
    ["12/3/25 3:40", "EK 0564", "BLR", "", "3:40", "3:46", "B7773ER", "A6ECK", "B16", "T3", "B10", ""],
    ["12/3/25 3:40", "EK 0394", "HAN", "", "3:40", "3:45", "B7773ER", "A6ENA", "B04", "T3", "C8", ""],
    ["12/3/25 3:45", "EK 0255", "BCN/MEX", "MEX", "3:45", "3:42", "B7772LR", "A6EWG", "B02", "T3", "C4", ""],
    ["12/3/25 3:50", "EK 0376", "BKK", "", "4:00", "3:57", "A380", "A6EOR", "F21", "T3", "B19", ""],
    ["12/3/25 3:50", "EK 0772", "CPT", "", "3:50", "3:47", "B7773ER", "A6ENE", "B09", "T3", "C16", ""],
    ["12/3/25 3:55", "EK 0504", "BOM", "", "3:55", "3:56", "B7773ER", "A6ENX", "D05", "T3", "A12", ""],
    ["12/3/25 4:00", "EK 0364", "SGN", "", "4:10", "4:02", "A350900", "A6EXG", "F04", "T3", "C5", ""],
    ["12/3/25 4:10", "EK 0624", "LHE", "", "4:20", "4:19", "B7773ER", "A6ENY", "B27", "T3", "B31", ""],
    ["12/3/25 4:10", "EK 0761", "JNB", "", "5:00", "4:56", "B7773ER", "A6EPD", "B18L", "T3", "B14", ""],
    ["12/3/25 4:15", "EK 0310", "HGH", "", "", "", "A350900", "", "", "T3", "", "Cancelled"],
    ["12/3/25 4:20", "EK 0101", "MXP", "", "4:20", "4:20", "B7773ER", "A6EGM", "G11", "T1", "A18", ""],
    ["12/3/25 4:20", "EK 0658", "MLE", "", "4:20", "4:22", "B7773ER", "A6EPC", "D10", "T3", "A17", ""],
    ["12/3/25 4:20", "EK 0510", "DEL", "", "4:30", "4:32", "B7773ER", "A6EGU", "A07", "T3", "A23", ""],
    ["12/3/25 4:25", "EK 0356", "CGK", "", "4:35", "4:29", "B7773ER", "A6EPG", "F25", "T3", "B27", ""],
    ["12/3/25 4:45", "EK 0324", "ICN", "", "4:45", "4:41", "B7773ER", "A6EPV", "F02", "T3", "C1", ""],
    ["12/3/25 7:00", "EK 0819", "RUH", "", "7:05", "7:04", "B7773ER", "A6ENS", "F13", "T3", "C23", ""],
    ["12/3/25 7:05", "EK 0805", "JED", "", "7:20", "7:16", "A380", "A6EOL", "D09", "T3", "A16", ""],
    ["12/3/25 7:05", "EK 0161", "DUB", "", "7:05", "7:05", "B7773ER", "A6ENV", "A03", "T3", "A3", ""],
    ["12/3/25 7:10", "EK 0017", "MAN", "", "7:10", "7:18", "A380", "A6EEX", "F20", "T3", "B17", ""],
    ["12/3/25 7:20", "EK 0027", "GLA", "", "7:40", "7:45", "A380", "A6EEZ", "B21R", "T3", "B20", ""],
    ["12/3/25 7:25", "EK 0141", "MAD", "", "7:25", "7:25", "A380", "A6EDS", "B08", "T3", "C14", ""],
    ["12/3/25 7:25", "EK 0751", "CMN", "", "8:05", "8:07", "A380", "A6EDV", "F26R", "T3", "B29", ""],
    ["12/3/25 7:25", "EK 0787", "ACC/ABJ", "ABJ", "7:45", "7:47", "B7773ER", "A6EGV", "B14", "T3", "B6", ""],
    ["12/3/25 7:25", "EK 0191", "LIS", "", "7:35", "7:35", "B7773ER", "A6EPI", "B22", "T3", "B22", ""],
    ["12/3/25 7:25", "EK 0035", "NCL", "", "7:30", "7:27", "B7773ER", "A6END", "B16", "T3", "B10", ""],
    ["12/3/25 7:30", "EK 0600", "KHI", "", "7:45", "7:44", "B7773ER", "A6EPR", "D08", "T3", "A15", ""],
    ["12/3/25 7:35", "EK 0159", "OSL", "", "7:35", "7:36", "A350900", "A6EXE", "B15", "T3", "B8", ""],
    ["12/3/25 7:35", "EK 0109", "LCA/MLA", "MLA", "7:50", "7:47", "B7773ER", "A6ENZ", "B05", "T3", "C10", ""],
    ["12/3/25 7:40", "EK 0855", "KWI", "", "8:15", "8:11", "B7773ER", "A6EQP", "G12", "T1", "A18", ""],
    ["12/3/25 7:40", "EK 0039", "BHX", "", "7:50", "7:51", "A380", "A6EUZ", "D06", "T3", "A13", ""],
    ["12/3/25 7:40", "EK 0015", "LGW", "", "7:40", "7:39", "A380", "A6EDK", "F22", "T3", "B21", ""],
    ["12/3/25 7:45", "EK 0001", "LHR", "", "8:15", "8:20", "A380", "A6EOE", "F21", "T3", "B19", ""],
    ["12/3/25 7:50", "EK 0073", "CDG", "", "8:15", "8:13", "A380", "A6EOZ", "F10", "T3", "C19", ""],
    ["12/3/25 7:50", "EK 0827", "DMM", "", "8:05", "8:05", "A350900", "A6EXJ", "C37", "T1", "B31a", ""],
    ["12/3/25 7:55", "EK 0957", "BEY", "", "7:55", "7:51", "B7772LR", "A6EWI", "B24", "T3", "B26", ""],
    ["12/3/25 7:55", "EK 0709", "MRU", "", "7:55", "7:55", "B7773ER", "A6ENL", "F23", "T3", "B23", ""],
    ["12/3/25 7:55", "EK 0945", "BSR", "", "8:00", "7:58", "B7773ER", "A6EGW", "G09", "T1", "A6a", ""],
    ["12/3/25 8:00", "EK 0941", "BGW", "", "8:20", "8:18", "A350900", "A6EXB", "G18", "T1", "A6", ""],
    ["12/3/25 8:05", "EK 0247", "GIG/EZE", "EZE", "8:25", "8:23", "B7773ER", "A6ECQ", "F05", "T3", "C7", ""],
    ["12/3/25 8:05", "EK 0179", "WAW", "", "8:10", "8:07", "B7773ER", "A6EGO", "B03", "T3", "C6", ""],
    ["12/3/25 8:10", "EK 0147", "AMS", "", "8:25", "8:37", "A380", "A6EUD", "F18", "T3", "B13", ""],
    ["12/3/25 8:10", "EK 0757", "ALG", "", "8:15", "8:15", "B7773ER", "A6EGE", "B01", "T3", "C2", ""],
    ["12/3/25 8:10", "EK 0927", "CAI", "", "8:35", "8:35", "A380", "A6EDX", "A06", "T3", "A24", ""],
    ["12/3/25 8:15", "EK 0065", "STN", "", "8:25", "8:25", "B7773ER", "A6EQH", "B26L", "T3", "B32", ""],
    ["12/3/25 8:15", "EK 0185", "BCN", "", "8:25", "8:18", "A380", "A6EDY", "B10", "T3", "C18", ""],
    ["12/3/25 8:20", "EK 0312", "HND", "", "8:45", "8:48", "B7773ER", "A6EQI", "B04", "T3", "C8", ""],
    ["12/3/25 8:20", "EK 0055", "DUS", "", "8:20", "8:19", "B7773ER", "A6EGP", "D10", "T3", "A17", ""],
    ["12/3/25 8:20", "EK 0837", "BAH", "", "8:40", "8:37", "A350900", "A6EXF", "G17", "T1", "A19a", ""],
    ["12/3/25 8:20", "EK 0157", "ARN", "", "8:30", "8:36", "B7773ER", "A6EBY", "F16", "T3", "B9", ""],
    ["12/3/25 8:20", "EK 0077", "NCE", "", "8:35", "8:34", "A380", "A6EUM", "F06", "T3", "C9", ""],
    ["12/3/25 8:25", "EK 0087", "ZRH", "", "8:35", "8:30", "A380", "A6EDQ", "B12", "T3", "C22", ""],
    ["12/3/25 8:30", "EK 0151", "CPH", "", "8:35", "8:36", "A380", "A6EUX", "A08", "T3", "A22", ""],
    ["12/3/25 8:30", "EK 0215", "LAX", "", "8:40", "8:41", "A380", "A6EVE", "D07", "T3", "A14", ""],
    ["12/3/25 8:30", "EK 0183", "BRU", "", "8:35", "8:38", "B7773ER", "A6EQN", "G11", "T1", "A7", ""],
    ["12/3/25 8:30", "EK 0201", "JFK", "", "8:45", "8:42", "A380", "A6EEF", "D04", "T3", "A11", ""],
    ["12/3/25 8:35", "EK 0081", "LYS", "", "8:40", "8:46", "A350900", "A6EXI", "F02", "T3", "C1", ""],
    ["12/3/25 8:40", "EK 0089", "GVA", "", "8:55", "8:53", "B7773ER", "A6EQK", "F24", "T3", "B25", ""],
    ["12/3/25 8:40", "EK 0045", "FRA", "", "8:45", "8:49", "B7773ER", "A6EGL", "B02", "T3", "C4", ""],
    ["12/3/25 8:40", "EK 0237", "BOS", "", "8:55", "8:57", "B7773ER", "A6EPZ", "F17", "T3", "B11", ""],
    ["12/3/25 8:40", "EK 0049", "MUC", "", "8:40", "8:40", "A380", "A6EDO", "D03", "T3", "A10", ""],
    ["12/3/25 8:40", "EK 0747", "TUN", "", "8:50", "8:58", "A350900", "A6EXL", "G02", "T1", "A19", ""],
    ["12/3/25 8:40", "EK 0139", "PRG", "", "8:50", "8:47", "A380", "A6EUN", "B09", "T3", "C16", ""],
    ["12/3/25 8:45", "EK 0386", "TPE", "", "9:10", "9:09", "B7772LR", "A6EWD", "G16", "T1", "A6b", ""],
    ["12/3/25 8:50", "EK 0059", "HAM", "", "8:50", "8:50", "B7773ER", "A6EGT", "B06", "T3", "C12", ""],
    ["12/3/25 8:50", "EK 0225", "SFO", "", "9:15", "9:10", "A380", "A6EUE", "A07", "T3", "A23", ""],
    ["12/3/25 8:55", "EK 0097", "FCO", "", "9:20", "9:20", "A380", "A6EEI", "D02", "T3", "A9", ""],
    ["12/3/25 8:55", "EK 0093", "BLQ", "", "9:20", "9:18", "A350900", "A6EXA", "G15", "T1", "A18", ""],
    ["12/3/25 8:55", "EK 0370", "BKK/DAD", "DAD", "9:15", "9:21", "B7773ER", "A6ECY", "B27", "T3", "B31", ""],
    ["12/3/25 8:55", "EK 0127", "VIE", "", "8:55", "9:00", "A380", "A6EDN", "F08", "T3", "C13", ""],
    ["12/3/25 9:05", "EK 0261", "GRU", "", "10:30", "", "A380", "A6EVR", "F21", "T3", "B19", ""],
    ["12/3/25 9:05", "EK 0205", "MXP/JFK", "JFK", "9:25", "9:25", "A380", "A6EUB", "F09", "T3", "C17", ""],
    ["12/3/25 9:10", "EK 0398", "DPS", "", "9:10", "9:15", "B7773ER", "A6EPT", "B17", "T3", "B12", ""],
    ["12/3/25 9:10", "EK 0707", "SEZ/TNR", "TNR", "9:20", "9:28", "B7773ER", "A6EGX", "C38", "T1", "C12a", ""],
    ["12/3/25 9:10", "EK 0770", "CPT", "", "9:25", "9:22", "B7773ER", "A6EPU", "C29", "T1", "B2", ""],
    ["12/3/25 9:15", "EK 0713", "LUN/HRE", "HRE", "9:40", "9:35", "B7773ER", "A6EGY", "F25", "T3", "B27", ""],
    ["12/3/25 9:15", "EK 0725", "DAR", "", "9:25", "9:21", "B7773ER", "A6EGJ", "C33", "T1", "B3", ""],
    ["12/3/25 9:15", "EK 0304", "PVG", "", "9:15", "9:14", "B7773ER", "A6EPL", "B11", "T3", "C20", ""],
    ["12/3/25 9:20", "EK 0133", "DME", "", "9:20", "9:30", "A380", "A6EDM", "D01", "T3", "A8", ""],
    ["12/3/25 9:25", "EK 0334", "MNL", "", "9:45", "9:42", "B7773ER", "A6ENF", "F27", "T3", "B30", ""],
    ["12/3/25 9:25", "EK 0723", "ADD", "", "9:25", "9:39", "B7772LR", "A6EWC", "G13", "T1", "A19a", ""],
    ["12/3/25 9:25", "EK 0506", "BOM", "", "10:15", "10:08", "B7773ER", "A6EBU", "B23", "T3", "B24", ""],
    ["12/3/25 9:30", "EK 0372", "BKK", "", "9:40", "9:45", "A380", "A6EVD", "A02", "T3", "A4", ""],
    ["12/3/25 9:35", "EK 0392", "SGN", "", "9:35", "9:40", "B7773ER", "A6ENC", "G03", "T1", "A6", ""],
    ["12/3/25 9:35", "EK 0135", "VCE", "", "9:40", "9:38", "B7773ER", "A6EGS", "F03", "T3", "C3", ""],
    ["12/3/25 9:40", "EK 0652", "MLE/CMB", "CMB", "9:45", "9:43", "B7773ER", "A6ENJ", "A04", "T3", "A2", ""],
    ["12/3/25 9:40", "EK 0029", "LHR", "", "10:20", "", "A380", "A6EED", "D09", "T3", "A16", ""],
    ["12/3/25 9:45", "EK 0235", "ORD", "", "9:45", "9:44", "B7773ER", "A6EQJ", "A01", "T3", "A5", ""],
    ["12/3/25 9:45", "EK 0211", "IAH", "", "10:00", "9:57", "A380", "A6EVL", "A09", "T3", "A21", ""],
    ["12/3/25 9:45", "EK 0729", "EBB", "", "10:00", "10:00", "B7772LR", "A6EWE", "B22", "T3", "B22", ""],
    ["12/3/25 9:55", "EK 0229", "SEA", "", "9:55", "9:51", "B7773ER", "A6EPY", "B24", "T3", "B26", ""],
    ["12/3/25 9:55", "EK 0516", "DEL", "", "10:00", "9:57", "B7773ER", "A6EGD", "B16", "T3", "B10", ""],
    ["12/3/25 10:00", "EK 0406", "MEL", "", "10:00", "10:03", "A380", "A6EOC", "F19", "T3", "B15", ""],
    ["12/3/25 10:05", "EK 0111", "BUD", "", "10:05", "9:59", "B7773ER", "A6ECR", "F23", "T3", "B23", ""],
    ["12/3/25 10:05", "EK 0448", "AKL", "", "10:15", "10:10", "A380", "A6EVQ", "B18R", "T3", "B14", ""],
    ["12/3/25 10:10", "EK 0763", "JNB", "", "10:20", "", "A380", "A6EEN", "F12", "T3", "C21", ""],
    ["12/3/25 10:15", "EK 0412", "SYD/CHC", "CHC", "10:20", "", "A380", "A6EVM", "A05", "T3", "A1", ""],
    ["12/3/25 10:15", "EK 0123", "IST", "", "10:15", "10:16", "A380", "A6EEV", "D06", "T3", "A13", ""],
    ["12/3/25 10:15", "EK 0660", "MLE", "", "10:15", "10:10", "B7773ER", "A6EPJ", "B14", "T3", "B6", ""],
    ["12/3/25 10:15", "EK 0352", "SIN", "", "10:15", "", "A380", "A6EOA", "B08", "T3", "C14", ""],
    ["12/3/25 10:25", "EK 0434", "BNE", "", "10:25", "", "A380", "A6EEU", "D08", "T3", "A15", ""],
    ["12/3/25 10:30", "EK 0586", "DAC", "", "10:30", "", "B7773ER", "A6ENO", "B03", "T3", "C6", ""],
    ["12/3/25 10:30", "EK 0783", "LOS", "", "10:45", "", "B7773ER", "A6ECO", "F16", "T3", "B9", ""],
    ["12/3/25 10:30", "EK 0719", "NBO", "", "10:30", "", "B7773ER", "A6ECX", "B26L", "T3", "B32", ""],
    ["12/3/25 10:30", "EK 0703", "MRU", "", "10:30", "", "A380", "A6EOS", "D05", "T3", "A12", ""],
    ["12/3/25 10:35", "EK 0396", "HKT", "", "10:35", "", "B7773ER", "A6EPA", "B05", "T3", "C10", ""],
    ["12/3/25 10:40", "EK 0380", "HKG", "", "11:40", "", "A380", "A6EVN", "D02", "T3", "A9", ""],
    ["12/3/25 10:40", "EK 0775", "DUR", "", "10:40", "", "B7773ER", "A6ECE", "B20", "T3", "B18", ""],
    ["12/3/25 10:45", "EK 0328", "SZX", "", "10:45", "", "B7773ER", "A6EQL", "F04", "T3", "C5", ""],
    ["12/3/25 10:45", "EK 0929", "CAI", "", "10:45", "", "B7772LR", "A6EWJ", "F26L", "T3", "B29", ""],
    ["12/3/25 10:50", "EK 0362", "CAN", "", "10:50", "", "B7773ER", "A6ENP", "A08", "T3", "A22", ""],
    ["12/3/25 10:55", "EK 0358", "CGK", "", "10:55", "", "B7773ER", "A6ECT", "F10", "T3", "C19", ""],
    ["12/3/25 11:00", "EK 0342", "KUL", "", "11:00", "", "A380", "A6EDU", "F13", "T3", "C23", ""],
    ["12/3/25 11:00", "EK 0308", "PEK", "", "11:00", "", "B7773ER", "A6EGA", "F18", "T3", "B13", ""],
    ["12/3/25 11:00", "EK 0913", "DAM", "", "", "", "B777300", "", "", "T3", "", "Cancelled"],
    ["12/3/25 11:30", "EK 0209", "ATH/EWR", "EWR", "11:30", "", "B7773ER", "A6EQA", "F05", "T3", "C7", ""],
    ["12/3/25 12:00", "EK 0921", "CAI", "", "12:00", "", "B7773ER", "A6EPO", "D07", "T3", "A14", ""],
    ["12/3/25 12:10", "EK 0031", "LHR", "", "12:10", "", "A380", "A6EOH", "F22", "T3", "B21", ""],
    ["12/3/25 12:55", "EK 0654", "CMB", "", "12:55", "", "A350900", "A6EXD", "B15", "T3", "B8", ""],
    ["12/3/25 13:15", "EK 0572", "CCU", "", "13:15", "", "B7773ER", "A6ENU", "B21L", "T3", "B20", ""],
    ["12/3/25 13:15", "EK 0502", "BOM", "", "13:15", "", "A350900", "A6EXK", "B17", "T3", "B12", ""],
    ["12/3/25 13:35", "EK 0566", "BLR", "", "13:35", "", "B7773ER", "A6ECI", "D10", "T3", "A17", ""],
    ["12/3/25 13:40", "EK 0041", "LHR", "", "13:40", "", "B7773ER", "A6EGB", "B27", "T3", "B31", ""],
    ["12/3/25 13:55", "EK 2646", "DXB", "", "", "", "A380", "A6EVC", "TB30", "T3", "", ""],
    ["12/3/25 14:00", "EK 0187", "BCN", "", "14:00", "", "B7773ER", "A6EGZ", "F06", "T3", "C9", ""],
    ["12/3/25 14:05", "EK 0181", "BRU", "", "14:05", "", "B7773ER", "A6EQD", "B20", "T3", "B18", ""],
    ["12/3/25 14:20", "EK 0809", "MED", "", "14:20", "", "B7773ER", "A6ECZ", "D09", "T3", "A16", ""],
    ["12/3/25 14:20", "EK 0121", "IST", "", "14:20", "", "B7773ER", "A6ENY", "B23", "T3", "B24", ""],
    ["12/3/25 14:25", "EK 0009", "LGW", "", "14:25", "", "A380", "A6EVA", "D06", "T3", "A13", ""],
    ["12/3/25 14:25", "EK 0765", "JNB", "", "14:25", "", "B7773ER", "A6EPK", "D08", "T3", "A15", ""],
    ["12/3/25 14:30", "EK 0003", "LHR", "", "14:30", "", "A380", "A6EUI", "D04", "T3", "A11", ""],
    ["12/3/25 14:30", "EK 0193", "LIS", "", "14:30", "", "B7773ER", "A6ENX", "F27", "T3", "B30", ""],
    ["12/3/25 14:30", "EK 0019", "MAN", "", "14:30", "", "A380", "A6EUP", "A06", "T3", "A24", ""],
    ["12/3/25 14:30", "EK 0903", "AMM", "", "14:30", "", "A380", "A6EOM", "F19", "T3", "B15", ""],
    ["12/3/25 14:30", "EK 0067", "STN", "", "14:30", "", "B7773ER", "A6ENT", "B10", "T3", "C18", ""],
    ["12/3/25 14:35", "EK 0163", "DUB", "", "14:35", "", "B7773ER", "A6ENS", "A01", "T3", "A5", ""],
    ["12/3/25 14:40", "EK 0057", "DUS", "", "14:40", "", "A380", "A6EUQ", "A03", "T3", "A3", ""],
    ["12/3/25 14:40", "EK 0083", "GVA", "", "14:40", "", "B7773ER", "A6EQP", "F23", "T3", "B23", ""],
    ["12/3/25 14:45", "EK 0143", "MAD", "", "14:45", "", "B7773ER", "A6EPH", "D07", "T3", "A14", ""],
    ["12/3/25 14:45", "EK 0857", "KWI", "", "14:45", "", "A350900", "A6EXF", "B09", "T3", "C16", ""],
    ["12/3/25 14:45", "EK 0546", "MAA", "", "14:45", "", "B7773ER", "A6EGQ", "B26L", "T3", "B32", ""],
    ["12/3/25 14:45", "EK 0528", "HYD", "", "14:45", "", "B7773ER", "A6ENR", "F26L", "T3", "B29", ""],
    ["12/3/25 14:50", "EK 0023", "EDI", "", "14:50", "", "A350900", "A6EXJ", "D05", "T3", "A12", ""],
    ["12/3/25 14:50", "EK 0075", "CDG", "", "14:50", "", "A380", "A6EOB", "D01", "T3", "A8", ""],
    ["12/3/25 14:50", "EK 0037", "BHX", "", "14:50", "", "B7773ER", "A6ENH", "B16", "T3", "B10", ""],
    ["12/3/25 15:00", "EK 0923", "CAI", "", "15:00", "", "A380", "A6EUC", "A09", "T3", "A21", ""],
    ["12/3/25 15:00", "EK 0979", "IKA", "", "15:00", "", "B7772LR", "A6EWH", "B14", "T3", "B6", ""],
    ["12/3/25 15:00", "EK 0061", "HAM", "", "15:00", "", "B7773ER", "A6EGK", "B18L", "T3", "B14", ""],
    ["12/3/25 15:00", "EK 0618", "SKT", "", "15:00", "", "B7773ER", "A6ECK", "A04", "T3", "A2", ""],
    ["12/3/25 15:05", "EK 0095", "FCO", "", "15:05", "", "B7773ER", "A6EGU", "B22", "T3", "B22", ""],
    ["12/3/25 15:10", "EK 0514", "DEL", "", "15:10", "", "B7773ER", "A6ENQ", "B24", "T3", "B26", ""],
    ["12/3/25 15:15", "EK 0047", "FRA", "", "15:15", "", "A380", "A6EOJ", "A05", "T3", "A1", ""],
    ["12/3/25 15:15", "EK 0091", "MXP", "", "15:15", "", "A380", "A6EVH", "A08", "T3", "A22", ""],
    ["12/3/25 15:20", "EK 0149", "AMS", "", "15:20", "", "A380", "A6EEB", "F21", "T3", "B19", ""],
    ["12/3/25 15:20", "EK 0721", "NBO", "", "15:20", "", "B7773ER", "A6ECJ", "F03", "T3", "C3", ""],
    ["12/3/25 15:40", "EK 0508", "BOM", "", "15:40", "", "B7773ER", "A6ENM", "F24", "T3", "B25", ""],
    ["12/3/25 15:40", "EK 0953", "BEY", "", "15:40", "", "B7773ER", "A6ENK", "D02", "T3", "A9", ""],
    ["12/3/25 15:40", "EK 0125", "VIE", "", "15:40", "", "B7773ER", "A6EPN", "F25", "T3", "B27", ""],
    ["12/3/25 15:45", "EK 0803", "JED", "", "15:45", "", "A380", "A6EEP", "F20", "T3", "B17", ""],
    ["12/3/25 15:50", "EK 0051", "MUC", "", "15:50", "", "A380", "A6EOO", "A10", "T3", "A20", ""],
    ["12/3/25 15:55", "EK 0175", "LED", "", "15:55", "", "B7773ER", "A6EBR", "B01", "T3", "C2", ""],
    ["12/3/25 15:55", "EK 0085", "ZRH", "", "15:55", "", "B7773ER", "A6EPB", "B06", "T3", "C12", ""],
    ["12/3/25 16:00", "EK 0825", "DMM", "", "", "", "B7772LR", "A6EWH", "", "T3", "", "Cancelled"],
    ["12/3/25 16:00", "EK 0839", "BAH", "", "16:00", "", "B7772LR", "A6EWB", "F10", "T3", "C19", ""],
    ["12/3/25 16:05", "EK 0005", "LHR", "", "16:05", "", "A380", "A6EVK", "A02", "T3", "A4", ""],
    ["12/3/25 16:10", "EK 0648", "CMB", "", "16:10", "", "B7773ER", "A6EGN", "F09", "T3", "C17", ""],
    ["12/3/25 16:15", "EK 0131", "DME", "", "16:15", "", "A380", "A6EER", "F22", "T3", "B21", ""],
    ["12/3/25 16:45", "EK 0584", "DAC", "", "16:45", "", "B7773ER", "A6ECA", "B21L", "T3", "B20", ""],
    ["12/3/25 17:40", "EK 0817", "RUH", "", "17:40", "", "B7773ER", "A6EPC", "B27", "T3", "B31", ""],
    ["12/3/25 17:45", "EK 0117", "IST", "", "17:45", "", "A350900", "A6EXB", "F05", "T3", "C7", ""],
    ["12/3/25 17:55", "EK 0336", "MNL", "", "17:55", "", "B7773ER", "A6EPQ", "B17", "T3", "B12", ""],
    ["12/3/25 18:10", "EK 0602", "KHI", "", "18:10", "", "B7773ER", "A6ECF", "B20", "T3", "B18", ""],
    ["12/3/25 20:45", "EK 0859", "KWI", "", "20:45", "", "B7773ER", "A6EBU", "F26L", "T3", "B29", ""],
    ["12/3/25 20:55", "EK 0925", "CAI", "", "20:55", "", "A380", "A6EDX", "A06", "T3", "A24", ""],
    ["12/3/25 21:00", "EK 0821", "DMM", "", "21:00", "", "B7773ER", "A6ECV", "B16", "T3", "B10", ""],
    ["12/3/25 21:00", "EK 0542", "MAA", "", "21:00", "", "B7773ER", "A6ENI", "D10", "T3", "A17", ""],
    ["12/3/25 21:00", "EK 0314", "SIN", "", "21:00", "", "A380", "A6EEG", "F18", "T3", "B13", ""],
    ["12/3/25 21:30", "EK 0614", "ISB", "", "21:30", "", "B7773ER", "A6EPR", "B15", "T3", "B8", ""],
    ["12/3/25 21:30", "EK 0524", "HYD", "", "21:30", "", "B7773ER", "A6ENB", "B18L", "T3", "B14", ""],
    ["12/3/25 21:30", "EK 0522", "TRV", "", "21:30", "", "B7773ER", "A6ENN", "B22", "T3", "B22", ""],
    ["12/3/25 21:30", "EK 0512", "DEL", "", "21:30", "", "B7773ER", "A6EGD", "B26L", "T3", "B32", ""],
    ["12/3/25 21:35", "EK 0568", "BLR", "", "21:35", "", "A380", "A6EVS", "F20", "T3", "B17", ""],
    ["12/3/25 21:35", "EK 0344", "KUL", "", "21:35", "", "B7773ER", "A6EGM", "F25", "T3", "B27", ""],
    ["12/3/25 21:40", "EK 0532", "COK", "", "21:40", "", "B7772LR", "A6EWC", "B17", "T3", "B12", ""],
    ["12/3/25 21:40", "EK 0500", "BOM", "", "21:40", "", "A380", "A6EON", "D01", "T3", "A8", ""],
    ["12/3/25 21:45", "EK 0416", "SYD", "", "21:45", "", "A380", "A6EET", "D09", "T3", "A16", ""],
    ["12/3/25 21:50", "EK 0404", "MEL", "", "21:50", "", "B7773ER", "A6EQO", "B14", "T3", "B6", ""],
    ["12/3/25 21:50", "EK 0622", "LHE", "", "21:50", "", "B7773ER", "A6EPE", "B23", "T3", "B24", ""],
    ["12/3/25 22:00", "EK 0606", "KHI", "", "22:00", "", "B7773ER", "A6ECM", "D03", "T3", "A10", ""],
    ["12/3/25 22:15", "EK 0905", "AMM", "", "22:15", "", "A350900", "A6EXF", "F17", "T3", "B11", ""],
    ["12/3/25 22:35", "EK 0374", "BKK", "", "22:35", "", "A380", "A6EOQ", "A07", "T3", "A23", ""],
    ["12/3/25 22:50", "EK 0538", "AMD", "", "22:50", "", "B7773ER", "A6ENG", "B24", "T3", "B26", ""],
    ["12/3/25 23:25", "EK 0767", "JNB", "", "23:25", "", "B7773ER", "A6EGF", "B20", "T3", "B18", ""],
  ],
}

export default function QRTListScreen({ onBack }: QRTListScreenProps) {
  const { loadPlans, setLoadPlans } = useLoadPlans()
  const [selectedLoadPlan, setSelectedLoadPlan] = useState<LoadPlanDetail | null>(null)
  const [selectedBayInfo, setSelectedBayInfo] = useState<BayInfo | null>(null)
  const [selectedDepartureBayInfo, setSelectedDepartureBayInfo] = useState<DepartureBayInfo | null>(null)
  const [isLoading, setIsLoading] = useState(true)
  const [showUploadModal, setShowUploadModal] = useState(false)
  const [showPasteArrivalModal, setShowPasteModal] = useState(false)
  const [showPasteDepartureModal, setShowPasteDepartureModal] = useState(false)
  const [isArrivalBayNumbersOpen, setIsBayNumbersOpen] = useState(false)
  const [isDepartureBayNumbersOpen, setIsDepartureNumbersOpen] = useState(false)
  const [bayArrivalData, setBayNumberData] = useState<{ headers: string[]; rows: string[][] } | null>(DEFAULT_ARRIVAL_BAY_DATA)
  const [bayDepartureData, setBayDepartureData] = useState<{ headers: string[]; rows: string[][] } | null>(DEFAULT_DEPARTURE_BAY_DATA)
  const fileInputRef = useRef<HTMLInputElement | null>(null)
  const [showAddFilterDropdown, setShowAddFilterDropdown] = useState(false)
  const [showViewOptions, setShowViewOptions] = useState(false)
  const [searchQuery, setSearchQuery] = useState("")
  const [shiftFilter, setShiftFilter] = useState<ShiftType>("current")
  const [periodFilter, setPeriodFilter] = useState<PeriodType>("all")
  const [waveFilter, setWaveFilter] = useState<WaveType>("all")
  const addFilterRef = useRef<HTMLDivElement>(null)
  const viewOptionsRef = useRef<HTMLDivElement>(null)

  // Create a lookup map from arrival bay data by normalized flight number
  const bayArrivalLookup = useMemo(() => {
    const lookup = new Map<string, BayInfo>()
    if (bayArrivalData) {
      bayArrivalData.rows.forEach(row => {
        const bayInfo = parseBayInfoRow(bayArrivalData.headers, row)
        const normalizedFlightNo = normalizeFlightNo(bayInfo.flightNo)
        if (normalizedFlightNo) {
          lookup.set(normalizedFlightNo, bayInfo)
        }
      })
    }
    return lookup
  }, [bayArrivalData])

  // Create a lookup map from departure bay data by normalized flight number
  const bayDepartureLookup = useMemo(() => {
    const lookup = new Map<string, DepartureBayInfo>()
    if (bayDepartureData) {
      bayDepartureData.rows.forEach(row => {
        const bayInfo = parseDepartureBayInfoRow(bayDepartureData.headers, row)
        const normalizedFlightNo = normalizeFlightNo(bayInfo.flightNo)
        if (normalizedFlightNo) {
          lookup.set(normalizedFlightNo, bayInfo)
        }
      })
    }
    return lookup
  }, [bayDepartureData])

  // Fetch load plans from Supabase on mount
  useEffect(() => {
    const fetchLoadPlans = async () => {
      setIsLoading(true)
      try {
        const supabaseLoadPlans = await getLoadPlansFromSupabase()
        if (supabaseLoadPlans.length > 0) {
          setLoadPlans(supabaseLoadPlans)
          console.log(`[QRTListScreen] Loaded ${supabaseLoadPlans.length} load plans from Supabase`)
        } else {
          setLoadPlans([])
          console.log("[QRTListScreen] No load plans from Supabase")
        }
      } catch (err) {
        console.error("[QRTListScreen] Error fetching load plans:", err)
        setLoadPlans([])
      } finally {
        setIsLoading(false)
      }
    }

    fetchLoadPlans()
  }, [setLoadPlans])

  // Close dropdowns when clicking outside
  useEffect(() => {
    function handleClickOutside(event: MouseEvent) {
      if (addFilterRef.current && !addFilterRef.current.contains(event.target as Node)) {
        setShowAddFilterDropdown(false)
      }
      if (viewOptionsRef.current && !viewOptionsRef.current.contains(event.target as Node)) {
        setShowViewOptions(false)
      }
    }

    if (showAddFilterDropdown || showViewOptions) {
      document.addEventListener('mousedown', handleClickOutside)
      return () => {
        document.removeEventListener('mousedown', handleClickOutside)
      }
    }
  }, [showAddFilterDropdown, showViewOptions])

  // Filter and sort load plans
  const filteredLoadPlans = useMemo(() => {
    let filtered = [...loadPlans]

    // Filter by shift type
    if (shiftFilter === "current") {
      // Show all flights (no shift filter)
    } else if (shiftFilter === "night") {
      filtered = filtered.filter((plan) => {
        const { shiftType } = determinePeriodAndWave(plan.std)
        return shiftType === "night"
      })
    } else if (shiftFilter === "day") {
      filtered = filtered.filter((plan) => {
        const { shiftType } = determinePeriodAndWave(plan.std)
        return shiftType === "day"
      })
    }

    // Filter by period
    if (periodFilter !== "all") {
      filtered = filtered.filter((plan) => {
        const { period } = determinePeriodAndWave(plan.std)
        return period === periodFilter
      })
    }

    // Filter by wave (only applies to late-morning and afternoon periods)
    if (periodFilter === "early-morning" && waveFilter !== "all") {
      // Early morning doesn't have waves, so don't filter by wave
    } else if (waveFilter !== "all") {
      filtered = filtered.filter((plan) => {
        const { period, wave } = determinePeriodAndWave(plan.std)
        if (period === "late-morning" || period === "afternoon") {
          return wave === waveFilter
        }
        return true // Early morning doesn't have waves
      })
    }

    // Filter by search query
    if (searchQuery.trim()) {
      const query = searchQuery.toLowerCase()
      filtered = filtered.filter((plan) => 
        plan.flight.toLowerCase().includes(query) ||
        plan.date?.toLowerCase().includes(query) ||
        plan.acftType?.toLowerCase().includes(query) ||
        plan.acftReg?.toLowerCase().includes(query) ||
        plan.pax?.toLowerCase().includes(query) ||
        plan.std?.toLowerCase().includes(query)
      )
    }

    // Sort by STD descending (most recent first)
    // Combines date and STD time for proper chronological sorting
    return filtered.sort((a, b) => {
      // Parse date and STD for comparison
      const dateA = a.date || ""
      const dateB = b.date || ""
      const stdA = a.std || "00:00"
      const stdB = b.std || "00:00"
      
      // Compare dates first (descending - latest date first)
      if (dateA !== dateB) {
        return dateB.localeCompare(dateA)
      }
      
      // If same date, compare STD times (descending - latest time first)
      const hoursA = parseStdToHours(stdA)
      const hoursB = parseStdToHours(stdB)
      return hoursB - hoursA
    })
  }, [loadPlans, shiftFilter, periodFilter, waveFilter, searchQuery])

  // Determine if wave filter should be shown
  const showWaveFilter = periodFilter === "late-morning" || periodFilter === "afternoon"

  const handleRowClick = async (loadPlan: LoadPlan, flightIndex: number) => {
    // DEPARTURE: Lazy flight matching by normalized flight number
    const normalizedFlight = normalizeFlightNo(loadPlan.flight)
    const departureInfo = bayDepartureLookup.get(normalizedFlight) || null
    setSelectedDepartureBayInfo(departureInfo)
    
    // ARRIVAL: Index-based matching - row N from arrival data for Nth flight in list
    let arrivalInfo: BayInfo | null = null
    if (bayArrivalData && bayArrivalData.rows.length > 0) {
      // Use modulo to wrap around if we have more flights than arrival rows
      const arrivalIndex = flightIndex % bayArrivalData.rows.length
      arrivalInfo = parseBayInfoRow(bayArrivalData.headers, bayArrivalData.rows[arrivalIndex])
    }
    setSelectedBayInfo(arrivalInfo)
    
    // Fetch from Supabase
    try {
      console.log(`[QRTListScreen] Fetching load plan detail from Supabase for ${loadPlan.flight}`)
      const supabaseDetail = await getLoadPlanDetailFromSupabase(loadPlan.flight)
      if (supabaseDetail) {
        console.log(`[QRTListScreen] Successfully loaded detail from Supabase:`, {
          flight: supabaseDetail.flight,
          sectors: supabaseDetail.sectors.length,
        })
        setSelectedLoadPlan(supabaseDetail)
        return
      } else {
        console.log(`[QRTListScreen] No data found in Supabase for ${loadPlan.flight}`)
        return
      }
    } catch (err) {
      console.error("[QRTListScreen] Error fetching load plan detail:", err)
    }
  }


  // Filter load plan to only show ramp transfer sections
  const filterToRampTransferOnly = (plan: LoadPlanDetail): LoadPlanDetail => {
    const filteredSectors = plan.sectors.map(sector => {
      // Find the index of the first ramp transfer section
      const firstRampTransferIndex = sector.uldSections.findIndex(uldSection => uldSection.isRampTransfer)
      
      if (firstRampTransferIndex === -1) {
        // No ramp transfer sections, return empty sector
        return {
          ...sector,
          uldSections: []
        }
      }
      
      // Return sector with only ramp transfer sections and everything after
      return {
        ...sector,
        uldSections: sector.uldSections.slice(firstRampTransferIndex)
      }
    }).filter(sector => sector.uldSections.length > 0) // Remove sectors with no ramp transfer
    
    return {
      ...plan,
      sectors: filteredSectors
    }
  }

  if (selectedLoadPlan) {
    const filteredPlan = filterToRampTransferOnly(selectedLoadPlan)
    
    return (
      <LoadPlanDetailScreen
        loadPlan={filteredPlan}
        onBack={() => {
          setSelectedLoadPlan(null)
          setSelectedBayInfo(null)
          setSelectedDepartureBayInfo(null)
        }}
        isQRTList={true}
        arrivalBayInfo={selectedBayInfo}
        departureBayInfo={selectedDepartureBayInfo}
      />
    )
  }

  return (
    <div className="min-h-screen bg-gray-50 p-4">
      <div className="max-w-full">
        {/* Header with Upload Button */}
        <div className="flex justify-between items-center mb-4 px-2">
          <h2 className="text-lg font-semibold text-gray-900">QRT List</h2>
          <div className="flex gap-2">
            <Button onClick={() => setShowPasteModal(true)} variant="outline" className="border-[#D71A21] text-[#D71A21] hover:bg-[#D71A21] hover:text-white">
              <ClipboardPaste className="w-4 h-4 mr-2" />
              Paste Arrival
            </Button>
            <Button onClick={() => setShowPasteDepartureModal(true)} variant="outline" className="border-[#D71A21] text-[#D71A21] hover:bg-[#D71A21] hover:text-white">
              <ClipboardPaste className="w-4 h-4 mr-2" />
              Paste Departure
            </Button>
            <Button onClick={() => setShowUploadModal(true)} className="bg-[#D71A21] hover:bg-[#B01419] text-white">
              <Upload className="w-4 h-4 mr-2" />
              Upload Files
            </Button>
          </div>
        </div>

        {/* Bay Numbers Section Toggle */}
        <div className="mx-2 mb-4">
          <Collapsible open={isArrivalBayNumbersOpen} onOpenChange={setIsBayNumbersOpen}>
            <CollapsibleTrigger className="w-full">
              <div className="bg-white rounded-lg border border-gray-200 p-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                <div className="flex items-center gap-3">
                  <h3 className="text-lg font-semibold text-gray-900">Bay Numbers (Arrival)</h3>
                  {bayArrivalData && (
                    <span className="text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full">
                      {bayArrivalData.rows.length} flights loaded
                    </span>
                  )}
                </div>
                {isArrivalBayNumbersOpen ? (
                  <ChevronDown className="w-5 h-5 text-gray-600" />
                ) : (
                  <ChevronRight className="w-5 h-5 text-gray-600" />
                )}
              </div>
            </CollapsibleTrigger>
            <CollapsibleContent>
              <div className="bg-white rounded-lg border border-gray-200 border-t-0 overflow-hidden">
                {bayArrivalData ? (
                  <div className="max-h-[400px] overflow-auto">
                    <table className="w-full text-sm">
                      <thead className="bg-gray-100 sticky top-0">
                        <tr>
                          {bayArrivalData.headers.map((header, i) => (
                            <th
                              key={i}
                              className="px-3 py-2 text-left font-semibold text-gray-700 border-b whitespace-nowrap text-xs"
                            >
                              {header}
                            </th>
                          ))}
                        </tr>
                      </thead>
                      <tbody>
                        {bayArrivalData.rows.map((row, rowIndex) => (
                          <tr
                            key={rowIndex}
                            className={rowIndex % 2 === 0 ? "bg-white" : "bg-gray-50"}
                          >
                            {bayArrivalData.headers.map((_, colIndex) => (
                              <td
                                key={colIndex}
                                className="px-3 py-1.5 border-b border-gray-100 whitespace-nowrap text-xs"
                              >
                                {row[colIndex] || ""}
                              </td>
                            ))}
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                ) : (
                  <div className="p-4">
                    <p className="text-sm text-gray-500">
                      No arrival bay data loaded. Click "Paste Arrival" to import from the legacy system.
                    </p>
                  </div>
                )}
              </div>
            </CollapsibleContent>
          </Collapsible>
        </div>

        {/* Departure Numbers Section Toggle */}
        <div className="mx-2 mb-4">
          <Collapsible open={isDepartureBayNumbersOpen} onOpenChange={setIsDepartureNumbersOpen}>
            <CollapsibleTrigger className="w-full">
              <div className="bg-white rounded-lg border border-gray-200 p-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                <div className="flex items-center gap-3">
                  <h3 className="text-lg font-semibold text-gray-900">Bay Numbers (Departure)</h3>
                  {bayDepartureData && (
                    <span className="text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full">
                      {bayDepartureData.rows.length} flights loaded
                    </span>
                  )}
                </div>
                {isDepartureBayNumbersOpen ? (
                  <ChevronDown className="w-5 h-5 text-gray-600" />
                ) : (
                  <ChevronRight className="w-5 h-5 text-gray-600" />
                )}
              </div>
            </CollapsibleTrigger>
            <CollapsibleContent>
              <div className="bg-white rounded-lg border border-gray-200 border-t-0 overflow-hidden">
                {bayDepartureData ? (
                  <div className="max-h-[400px] overflow-auto">
                    <table className="w-full text-sm">
                      <thead className="bg-gray-100 sticky top-0">
                        <tr>
                          {bayDepartureData.headers.map((header, i) => (
                            <th
                              key={i}
                              className="px-3 py-2 text-left font-semibold text-gray-700 border-b whitespace-nowrap text-xs"
                            >
                              {header}
                            </th>
                          ))}
                        </tr>
                      </thead>
                      <tbody>
                        {bayDepartureData.rows.map((row, rowIndex) => (
                          <tr
                            key={rowIndex}
                            className={rowIndex % 2 === 0 ? "bg-white" : "bg-gray-50"}
                          >
                            {bayDepartureData.headers.map((_, colIndex) => (
                              <td
                                key={colIndex}
                                className="px-3 py-1.5 border-b border-gray-100 whitespace-nowrap text-xs"
                              >
                                {row[colIndex] || ""}
                              </td>
                            ))}
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                ) : (
                  <div className="p-4">
                    <p className="text-sm text-gray-500">
                      No departure data loaded. Click "Paste Departure" to import from the legacy system.
                    </p>
                  </div>
                )}
              </div>
            </CollapsibleContent>
          </Collapsible>
        </div>

        <div className="mx-2 rounded-lg border border-gray-200 overflow-x-auto">
          <div className="bg-white">
            <table className="w-full">
              <thead>
                <tr className="bg-[#D71A21] text-white">
                  <th className="px-2 py-1 text-left font-semibold text-xs">
                    <div className="flex items-center gap-2">
                      <Plane className="w-4 h-4 flex-shrink-0" />
                      <span className="whitespace-nowrap">Flight</span>
                    </div>
                  </th>
                  <th className="px-2 py-1 text-left font-semibold text-xs">
                    <div className="flex items-center gap-2">
                      <Calendar className="w-4 h-4 flex-shrink-0" />
                      <span className="whitespace-nowrap">Date</span>
                    </div>
                  </th>
                  <th className="px-2 py-1 text-left font-semibold text-xs">
                    <div className="flex items-center gap-2">
                      <Package className="w-4 h-4 flex-shrink-0" />
                      <span className="whitespace-nowrap">ACFT TYPE</span>
                    </div>
                  </th>
                  <th className="px-2 py-1 text-left font-semibold text-xs">
                    <div className="flex items-center gap-2">
                      <Package className="w-4 h-4 flex-shrink-0" />
                      <span className="whitespace-nowrap">ACFT REG</span>
                    </div>
                  </th>
                  <th className="px-2 py-1 text-left font-semibold text-xs">
                    <div className="flex items-center gap-2">
                      <Users className="w-4 h-4 flex-shrink-0" />
                      <span className="whitespace-nowrap">Route</span>
                    </div>
                  </th>
                  <th className="px-2 py-1 text-left font-semibold text-xs">
                    <div className="flex items-center gap-2">
                      <Clock className="w-4 h-4 flex-shrink-0" />
                      <span className="whitespace-nowrap">STD</span>
                    </div>
                  </th>
                  <th className="px-2 py-1 text-left font-semibold text-xs">
                    <div className="flex items-center gap-2">
                      <FileText className="w-4 h-4 flex-shrink-0" />
                      <span className="whitespace-nowrap">TTL PLN ULD</span>
                    </div>
                  </th>
                  <th className="px-2 py-1 text-left font-semibold text-xs">
                    <div className="flex items-center gap-2">
                      <FileText className="w-4 h-4 flex-shrink-0" />
                      <span className="whitespace-nowrap">ULD Version</span>
                    </div>
                  </th>
                  <th className="px-2 py-1 w-10"></th>
                </tr>
              </thead>
              <tbody>
                {isLoading ? (
                  <tr>
                    <td colSpan={9} className="px-3 py-2 text-center text-gray-500 text-sm">
                      Loading load plans...
                    </td>
                  </tr>
                ) : filteredLoadPlans.length === 0 ? (
                  <tr>
                    <td colSpan={9} className="px-3 py-2 text-center text-gray-500 text-sm">
                      {loadPlans.length === 0 ? "No load plans available" : "No load plans match the selected filters"}
                    </td>
                  </tr>
                ) : (
                  filteredLoadPlans.map((loadPlan, index) => (
                    <LoadPlanRow key={index} loadPlan={loadPlan} flightIndex={index} onClick={handleRowClick} />
                  ))
                )}
              </tbody>
            </table>
          </div>
        </div>
      </div>

      {/* Dummy Upload Modal - Empty and useless */}
      <UploadModal
        isOpen={showUploadModal}
        isProcessing={false}
        isDragging={false}
        progress={0}
        error={null}
        uploadedFile={null}
        fileInputRef={fileInputRef}
        onClose={() => setShowUploadModal(false)}
        onDragOver={() => {}}
        onDragLeave={() => {}}
        onDrop={() => {}}
        onFileInputChange={() => {}}
      />

      {/* Clipboard Paste Modal for Bay Data */}
      <ClipboardPasteModal
        isOpen={showPasteArrivalModal}
        onClose={() => setShowPasteModal(false)}
        title="Paste Arrival Data"
        description="Copy the arrival bay/flight table from the legacy system and paste below"
        onConfirm={(data) => {
          setBayNumberData(data)
        }}
      />

      {/* Clipboard Paste Modal for Departure Data */}
      <ClipboardPasteModal
        isOpen={showPasteDepartureModal}
        onClose={() => setShowPasteDepartureModal(false)}
        title="Paste Departure Data"
        description="Copy the departure table from the legacy system and paste below"
        onConfirm={(data) => {
          setBayDepartureData(data)
        }}
      />
    </div>
  )
}

interface LoadPlanRowProps {
  loadPlan: LoadPlan
  flightIndex: number
  onClick: (loadPlan: LoadPlan, flightIndex: number) => void
}

function LoadPlanRow({ loadPlan, flightIndex, onClick }: LoadPlanRowProps) {
  return (
    <tr
      onClick={() => onClick(loadPlan, flightIndex)}
      className="border-b border-gray-100 last:border-b-0 hover:bg-gray-50 cursor-pointer"
    >
      <td className="px-2 py-1 font-semibold text-gray-900 text-xs whitespace-nowrap truncate">
        {loadPlan.flight}
      </td>
      <td className="px-2 py-1 text-gray-900 text-xs whitespace-nowrap truncate">{loadPlan.date}</td>
      <td className="px-2 py-1 text-gray-900 text-xs whitespace-nowrap truncate">{loadPlan.acftType}</td>
      <td className="px-2 py-1 text-gray-900 text-xs whitespace-nowrap truncate">{loadPlan.acftReg}</td>
      <td className="px-2 py-1 text-gray-900 text-xs whitespace-nowrap truncate">{loadPlan.pax}</td>
      <td className="px-2 py-1 text-gray-900 text-xs whitespace-nowrap truncate">{loadPlan.std}</td>
      <td className="px-2 py-1 text-gray-900 text-xs whitespace-nowrap truncate">{loadPlan.ttlPlnUld}</td>
      <td className="px-2 py-1 text-gray-900 text-xs whitespace-nowrap truncate">{loadPlan.uldVersion}</td>
      <td className="px-2 py-1 w-10">
        <ChevronRight className="h-4 w-4 text-gray-600 hover:text-[#D71A21]" />
      </td>
    </tr>
  )
}
